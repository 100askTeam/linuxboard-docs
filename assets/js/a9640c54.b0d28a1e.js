"use strict";(globalThis.webpackChunkdshanpi_website=globalThis.webpackChunkdshanpi_website||[]).push([[1063],{703:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909161015908-3cae88fb060742dbe2eecbc2050113c6.png"},5773:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909151332822-4f4532c5a759a0a6f1e29002406491c4.png"},6243:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240910172921007-8f6c439a970cd56716caa07aec9b57c3.png"},6447:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240910184123073-c65cd781af2cfa6a5ca7d3288d56840b.png"},7383:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909152743452-e4f5ba150cfcf9f0b0636c82ce2d6972.png"},7776:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909153500017-ab17a40034bd42c3b68c9f3f9413f0fc.png"},12222:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/2022-07-19-15-33-28-image-d25abb3ac23e3ae502ae7516a6b15c63.png"},21257:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240910183758461-cb9152c5b29fc1300a3ec4135d07a6cd.png"},23433:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"T113x/s4-SdNand/AMP/C906Intro","title":"T113\u5f02\u6784\u7b80\u4ecb","description":"T113s4\u82af\u7247\u5305\u542b\u56db\u4e2aCPU\u3002\u4e24\u4e2a\u4e3b\u6838\u5fc3Arm A7 CPU\uff0c\u8fd0\u884cTina Linux\uff08\u5168\u5fd7\u81ea\u7814Linux\uff09\u7cfb\u7edf\uff0c\u4e3a\u82af\u7247\u4e3b\u7cfb\u7edf\uff1b","source":"@site/docs/T113x/s4-SdNand/6-AMP/01-C906Intro.md","sourceDirName":"T113x/s4-SdNand/6-AMP","slug":"/T113x/s4-SdNand/AMP/C906Intro","permalink":"/docs/T113x/s4-SdNand/AMP/C906Intro","draft":false,"unlisted":false,"editUrl":"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/T113x/s4-SdNand/6-AMP/01-C906Intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"t113xSidebar","previous":{"title":"C906\u5f02\u6784\u5f00\u53d1","permalink":"/docs/category/c906\u5f02\u6784\u5f00\u53d1"},"next":{"title":"\u7efc\u5408\u5f00\u53d1\u6848\u4f8b\u4e00","permalink":"/docs/category/\u7efc\u5408\u5f00\u53d1\u6848\u4f8b\u4e00"}}');var r=t(74848),i=t(28453);const c={},l="T113\u5f02\u6784\u7b80\u4ecb",d={},a=[{value:"T113\u5bb6\u65cf",id:"t113\u5bb6\u65cf",level:2},{value:"T113\u82af\u7247\u6846\u56fe",id:"t113\u82af\u7247\u6846\u56fe",level:2},{value:"\u5f02\u6784\u5b50\u7cfb\u7edf\u6846\u67b6",id:"\u5f02\u6784\u5b50\u7cfb\u7edf\u6846\u67b6",level:2},{value:"MSGBOX \u4e0eAMP RPMSG",id:"msgbox-\u4e0eamp-rpmsg",level:2},{value:"\u5f02\u6784\u7cfb\u7edf\u63a7\u5236",id:"\u5f02\u6784\u7cfb\u7edf\u63a7\u5236",level:2},{value:"Linux\u5185\u6838\u914d\u7f6e",id:"linux\u5185\u6838\u914d\u7f6e",level:2},{value:"\u914d\u7f6e\u5185\u6838\u9a71\u52a8",id:"\u914d\u7f6e\u5185\u6838\u9a71\u52a8",level:3},{value:"\u52a0\u8f7d\u5c0f\u6838\u56fa\u4ef6",id:"\u52a0\u8f7d\u5c0f\u6838\u56fa\u4ef6",level:3},{value:"AMP SHELL\u6d4b\u8bd5\u5c0f\u6838",id:"amp-shell\u6d4b\u8bd5\u5c0f\u6838",level:3},{value:"RTOS\u7cfb\u7edf\u4ecb\u7ecd",id:"rtos\u7cfb\u7edf\u4ecb\u7ecd",level:2},{value:"\u7cfb\u7edf\u67b6\u6784",id:"\u7cfb\u7edf\u67b6\u6784",level:3},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:3},{value:"lichee/rtos \u76ee\u5f55",id:"licheertos-\u76ee\u5f55",level:4},{value:"lichee/rtos\u2011hal \u76ee\u5f55",id:"licheertoshal-\u76ee\u5f55",level:4},{value:"RTOS\u5f00\u53d1\u8bf4\u660e",id:"rtos\u5f00\u53d1\u8bf4\u660e",level:2},{value:"\u5173\u8054RTOS\u65b9\u6848",id:"\u5173\u8054rtos\u65b9\u6848",level:3},{value:"\u7f16\u8bd1RTOS\u65b9\u6848",id:"\u7f16\u8bd1rtos\u65b9\u6848",level:3},{value:"buildroot \u65b9\u6848",id:"buildroot-\u65b9\u6848",level:4},{value:"openwrt \u65b9\u6848",id:"openwrt-\u65b9\u6848",level:4},{value:"\u7f16\u8bd1\u5feb\u6377\u547d\u4ee4",id:"\u7f16\u8bd1\u5feb\u6377\u547d\u4ee4",level:3},{value:"RTOS \u56fa\u4ef6\u6253\u5305",id:"rtos-\u56fa\u4ef6\u6253\u5305",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"t113\u5f02\u6784\u7b80\u4ecb",children:"T113\u5f02\u6784\u7b80\u4ecb"})}),"\n",(0,r.jsx)(e.p,{children:"T113s4\u82af\u7247\u5305\u542b\u56db\u4e2aCPU\u3002\u4e24\u4e2a\u4e3b\u6838\u5fc3Arm A7 CPU\uff0c\u8fd0\u884cTina Linux\uff08\u5168\u5fd7\u81ea\u7814Linux\uff09\u7cfb\u7edf\uff0c\u4e3a\u82af\u7247\u4e3b\u7cfb\u7edf\uff1b"}),"\n",(0,r.jsx)(e.p,{children:"\u4e00\u4e2a\u662fRISC-V C906\u8f85\u52a9CPU\uff0c\u8fd0\u884cRTOS\uff08\u5168\u5fd7\u81ea\u7814RTOS\uff09\u7cfb\u7edf\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u63d0\u4f9b\u901a\u7528\u7b97\u529b\u8865\u5145\u3001\u5b9e\u73b0\u5b9e\u65f6\u63a7\u5236\u3001\u8f85\u52a9 Linux \u5b9e\u73b0\u5feb\u8d77\u548c\u4f4e\u529f\u8017\u7ba1\u7406\u7b49\u529f\u80fd\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd8\u6709\u4e00\u4e2a\u662f DSP HIFI4 \u6838\u5fc3\uff0c\u4e3b\u8981\u662f\u7528\u6765\u5904\u7406\u97f3\u9891\u7b97\u6cd5\u90e8\u5206\uff0c\u56e0\u4e3a\u8fd9\u90e8\u5206\u7f16\u8bd1\u5668\u9700\u8981\u4f01\u4e1a\u5355\u72ec\u7533\u8bf7\uff0c\u6240\u4ee5\u65e0\u6cd5\u8fdb\u884c\u5f00\u53d1\u4f7f\u7528\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"t113\u5bb6\u65cf",children:"T113\u5bb6\u65cf"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u5982\u4e0b\u5185\u5bb9\u6458\u81ea T113x_Datasheet_V1.3.pdf \u7248\u672c"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909151235761",src:t(49179).A+"",width:"2580",height:"782"})}),"\n",(0,r.jsx)(e.h2,{id:"t113\u82af\u7247\u6846\u56fe",children:"T113\u82af\u7247\u6846\u56fe"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909151155233",src:t(28316).A+"",width:"1625",height:"1338"})}),"\n",(0,r.jsx)(e.p,{children:"\u7b80\u5355\u63cf\u8ff0"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909151332822",src:t(5773).A+"",width:"2448",height:"1196"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5f02\u6784\u5b50\u7cfb\u7edf\u6846\u67b6",children:"\u5f02\u6784\u5b50\u7cfb\u7edf\u6846\u67b6"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u53c2\u9605 T113x_User_Manual_V1.2.pdf"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909152022940",src:t(25919).A+"",width:"1985",height:"1425"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909151608100",src:t(28722).A+"",width:"1823",height:"1745"})}),"\n",(0,r.jsx)(e.p,{children:"\u76f8\u5173\u5185\u5b58\u5206\u5e03"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909153500017",src:t(7776).A+"",width:"1910",height:"1362"})}),"\n",(0,r.jsx)(e.h2,{id:"msgbox-\u4e0eamp-rpmsg",children:"MSGBOX \u4e0eAMP RPMSG"}),"\n",(0,r.jsx)(e.p,{children:"\u5728 Tina Linux \u4e2d\uff0c\u63d0\u4f9b AMP \u4e0e RPMsg \u5bf9\u63a5 C906"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Linux remoteproc \u7ba1\u7406\u63a7\u5236 C907"}),"\n",(0,r.jsx)(e.li,{children:"RPMsg \u4e0e C907 \u901a\u8baf"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"T113 \u7684\u5f02\u6784\u7cfb\u7edf\u901a\u8baf\u5728\u786c\u4ef6\u4e0a\u4f7f\u7528\u7684\u662f MSGBOX\uff0c\u5728\u8f6f\u4ef6\u5c42\u9762\u4e0a\u4f7f\u7528\u7684\u662f AMP \u4e0e RPMsg \u901a\u8baf\u534f\u8bae\u3002\u5176\u4e2d A7 \u4e0a\u57fa\u4e8e Linux \u6807\u51c6\u7684 RPMsg \u9a71\u52a8\u6846\u67b6\uff0cC906\u57fa\u4e8e OpenAMP \u5f02\u6784\u901a\u4fe1\u6846\u67b6\u3002"}),"\n",(0,r.jsx)(e.p,{children:"T113 \u6240\u5e26\u6709\u7684 A7 \u4e3b\u6838\u5fc3\u4e0e C906 \u8f85\u52a9\u6838\u5fc3\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u4e24\u4e2a\u6838\u5fc3\uff0c\u4e3a\u4e86\u6700\u5927\u9650\u5ea6\u7684\u53d1\u6325\u4ed6\u4eec\u7684\u6027\u80fd\uff0c\u534f\u540c\u5b8c\u6210\u67d0\u4e00\u4efb\u52a1\uff0c\u6240\u4ee5\u5728\u4e0d\u540c\u7684\u6838\u5fc3\u4e0a\u9762\u8fd0\u884c\u7684\u7cfb\u7edf\u4e5f\u5404\u4e0d\u76f8\u540c\u3002\u8fd9\u4e9b\u4e0d\u540c\u67b6\u6784\u7684\u6838\u5fc3\u4ee5\u53ca\u4ed6\u4eec\u4e0a\u9762\u6240\u8fd0\u884c\u7684\u8f6f\u4ef6\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5c31\u6210\u4e86 AMP \u7cfb\u7edf \uff08Asymmetric Multiprocessing System, \u5f02\u6784\u591a\u5904\u7406\u7cfb\u7edf\uff09\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u7531\u4e8e\u4e24\u4e2a\u6838\u5fc3\u5b58\u5728\u7684\u76ee\u7684\u662f\u534f\u540c\u7684\u5904\u7406\uff0c\u56e0\u6b64\u5728\u5f02\u6784\u591a\u5904\u7406\u7cfb\u7edf\u4e2d\u5f80\u5f80\u4f1a\u5f62\u6210 Master - Remote \u7ed3\u6784\u3002\u4e3b\u6838\u5fc3\u542f\u52a8\u540e\u542f\u52a8\u4ece\u6838\u5fc3\u3002\u5f53\u4e24\u4e2a\u6838\u5fc3\u4e0a\u7684\u7cfb\u7edf\u90fd\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u4ed6\u4eec\u4e4b\u95f4\u5c31\u901a\u8fc7 IPC\uff08Inter Processor Communication\uff09\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\uff0c\u800c RPMsg \u5c31\u662f IPC \u4e2d\u7684\u4e00\u79cd\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5728AMP\u7cfb\u7edf\u4e2d\uff0c\u4e24\u4e2a\u6838\u5fc3\u901a\u8fc7\u5171\u4eab\u5185\u5b58\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002\u4e24\u4e2a\u6838\u5fc3\u901a\u8fc7 AMP \u4e2d\u65ad\u6765\u4f20\u9012\u8baf\u606f\u3002\u5185\u5b58\u7684\u7ba1\u7406\u7531\u4e3b\u6838\u8d1f\u8d23\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20220704155816774",src:t(93632).A+"",width:"670",height:"332"})}),"\n",(0,r.jsxs)(e.p,{children:["AMP \u7cfb\u7edf\u5728\u6bcf\u4e2a\u901a\u4fe1\u65b9\u5411\u4e0a\u90fd\u6709\u4e24\u4e2a\u7f13\u51b2\u533a\uff0c\u5206\u522b\u662f ",(0,r.jsx)(e.code,{children:"USED"})," \u548c ",(0,r.jsx)(e.code,{children:"AVAIL"}),"\uff0c\u8fd9\u4e2a\u7f13\u51b2\u533a\u53ef\u4ee5\u6309\u7167 RPMsg \u4e2d\u6d88\u606f\u7684\u683c\u5f0f\u5206\u6210\u4e00\u5757\u4e00\u5757\u94fe\u63a5\u5f62\u6210\u4e00\u4e2a\u73af\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20220704160952936",src:t(67284).A+"",width:"372",height:"482"})}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u4e3b\u6838\u9700\u8981\u548c\u4ece\u6838\u8fdb\u884c\u901a\u4fe1\u7684\u65f6\u5019\u53ef\u4ee5\u5206\u4e3a\u56db\u6b65\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"\uff081\uff09\u4e3b\u6838\u5148\u4eceUSED\u4e2d\u53d6\u5f97\u4e00\u5757\u5185\u5b58\uff08Allocate\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\uff082\uff09\u5c06\u6d88\u606f\u6309\u7167\u6d88\u606f\u534f\u8bae\u586b\u5145"}),"\n",(0,r.jsx)(e.p,{children:"\uff083\uff09\u5c06\u8be5\u5185\u5b58\u94fe\u63a5\u5230 AVAIL \u7f13\u51b2\u533a\u4e2d\uff08Send\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\uff084\uff09\u89e6\u53d1\u4e2d\u65ad\uff0c\u901a\u77e5\u8f85\u52a9\u6838\u6709\u6d88\u606f\u5904\u7406"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"img",src:t(80406).A+"",width:"869",height:"436"})}),"\n",(0,r.jsx)(e.p,{children:"\u53cd\u4e4b\uff0c\u4ece\u6838\u9700\u8981\u548c\u4e3b\u6838\u901a\u4fe1\u7684\u65f6\u5019\u4e5f\u7c7b\u4f3c\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"\uff081\uff09\u4ece\u6838\u5148\u4eceAVAIL\u4e2d\u53d6\u5f97\u4e00\u5757\u5185\u5b58\uff08Allocate\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\uff082\uff09\u5c06\u6d88\u606f\u6309\u7167\u6d88\u606f\u534f\u8bae\u586b\u5145"}),"\n",(0,r.jsx)(e.p,{children:"\uff083\uff09\u5c06\u8be5\u5185\u5b58\u94fe\u63a5\u5230 USED \u7f13\u51b2\u533a\u4e2d\uff08Send\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\uff084\uff09\u89e6\u53d1\u4e2d\u65ad\uff0c\u901a\u77e5\u4e3b\u6838\u6709\u6d88\u606f\u5904\u7406\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"img",src:t(82220).A+"",width:"889",height:"444"})}),"\n",(0,r.jsx)(e.p,{children:"RPMSG \u534f\u8bae"}),"\n",(0,r.jsx)(e.p,{children:"\u65e2\u7136 RPMsg \u662f\u4e00\u79cd\u4fe1\u606f\u4ea4\u6362\u7684\u534f\u8bae\uff0c\u4e0eTCP/IP\u7c7b\u4f3c\uff0cRPMsg \u534f\u8bae\u4e5f\u6709\u5206\u5c42\uff0c\u4e3b\u8981\u5206\u4e3a\u4e09\u5c42\uff0c\u5206\u522b\u662f\u4f20\u8f93\u5c42\u3001MAC\u5c42\u548c\u7269\u7406\u5c42\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20220704161948895",src:t(75890).A+"",width:"411",height:"215"})}),"\n",(0,r.jsx)(e.p,{children:"\u5176\u4e2d MAC\u5c42 \u7684 VirtIO \u662f\u4e00\u79cdI/O \u534a\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u662f\u4e00\u5957\u901a\u7528 I/O \u8bbe\u5907\u865a\u62df\u5316\u7684\u7a0b\u5e8f\uff0c\u662f\u5bf9\u534a\u865a\u62df\u5316 Hypervisor \u4e2d\u7684\u4e00\u7ec4\u901a\u7528 I/O \u8bbe\u5907\u7684\u62bd\u8c61\u3002 \u63d0\u4f9b\u4e86\u4e00\u5957\u4e0a\u5c42\u5e94\u7528\u4e0e\u5404 Hypervisor \u865a\u62df\u5316\u8bbe\u5907\u4e4b\u95f4\u7684\u901a\u4fe1\u6846\u67b6\u548c\u7f16\u7a0b\u63a5\u53e3\uff0c\u51cf\u5c11\u8de8\u5e73\u53f0\u6240\u5e26\u6765\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u5927\u5927\u63d0\u9ad8\u9a71\u52a8\u7a0b\u5e8f\u5f00\u53d1\u6548\u7387\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["RPMsg \u603b\u7ebf\u4e0a\u7684\u6d88\u606f\u90fd\u5177\u6709\u4ee5\u4e0b\u7ed3\u6784\uff0c\u5305\u542b\u6d88\u606f\u5934\u548c\u6570\u636e\u4e24\u4e2a\u56fa\u5b9a\u7684\u90e8\u5206\uff0c\u8be5\u6d88\u606f\u683c\u5f0f\u7684\u5b9a\u4e49\u4f4d\u4e8e",(0,r.jsx)(e.code,{children:"drivers/rpmsg/virtio_rpmsg_bus.c"}),"\u4e2d\uff0c\u5177\u4f53\u5b9a\u4e49\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"struct rpmsg_hdr {\n    u32 src;\n    u32 dst;\n    u32 reserved;\n    u16 len;\n    u16 flags;\n    u8 data[];\n} __packed;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5f02\u6784\u7cfb\u7edf\u63a7\u5236",children:"\u5f02\u6784\u7cfb\u7edf\u63a7\u5236"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u5f02\u6784\u7cfb\u7edf\u4e2d\uff0c\u4e0d\u6b62\u9700\u8981\u6d88\u606f\u7684\u4f20\u8f93\uff0c\u8fd8\u9700\u8981\u76f8\u5173\u63a7\u5236\u3002\u4f8b\u5982\u4e3b\u6838\u5bf9\u8f85\u52a9\u6838\u5fc3\u7684\u5f00\u542f\uff0c\u52a0\u8f7d\u56fa\u4ef6\uff0c\u5173\u95ed\u7b49\u7b49\u3002\u8fd9\u5c31\u9700\u8981\u7528\u5230 remoteproc \u6846\u67b6\u3002"}),"\n",(0,r.jsx)(e.p,{children:"remoteproc \u6846\u67b6\u652f\u6301\u5bf9\u4e0d\u540c\u5e73\u53f0\uff0c\u4e0d\u540c\u67b6\u6784\u7684\u5904\u7406\u5668\u8fdb\u884c\u63a7\u5236\uff0c\u53ef\u4ee5\u76d1\u63a7\u8f85\u52a9\u6838\u5fc3\u7684\u8fd0\u884c\u60c5\u51b5\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5bf9\u4e8e T113 \u6765\u8bf4\uff0cremoteproc \u7528\u4e8e\u5bf9 C906 \u8fdb\u884c\u751f\u547d\u5468\u671f\u7ba1\u7406\uff0c\u4e00\u822c\u6765\u8bf4\u5305\u542b\u6709\u52a0\u8f7d\u56fa\u4ef6\u3001 \u68c0\u6d4b\u8fdc\u7aef\u5904\u7406\u5668\u662f\u5426\u5d29\u6e83\u7b49\u529f\u80fd\u3002\u5b83\u5728\u52a0\u8f7d\u8fdc\u7aef\u5904\u7406\u5668\u7684\u56fa\u4ef6\u65f6\uff0c\u4f1a\u6839\u636e\u56fa\u4ef6\u4e2d\u5b9a\u4e49\u7684 resource table \u6765\u7533\u8bf7\u8d44\u6e90\uff0c\u5e76\u521b\u5efa VirtIO \u8bbe\u5907\u3002"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"remoteproc"})," \u6846\u67b6\u62bd\u8c61\u51fa\u786c\u4ef6\u5dee\u5f02\uff0c\u5141\u8bb8\u4e0d\u540c\u7684\u5e73\u53f0/\u67b6\u6784\u6765\u63a7\u5236\uff08\u5f00\u673a\u3001\u52a0\u8f7d\u56fa\u4ef6\u3001\u5173\u673a\uff09\u8fd9\u4e9b\u8fdc\u7a0b\u5904\u7406\u5668\uff0c\u6b64\u5916\uff0c\u8fd8\u4e3a\u652f\u6301\u8fd9\u79cd\u901a\u4fe1\u7684\u8fdc\u7a0b\u5904\u7406\u5668\u6dfb\u52a0\u4e86 ",(0,r.jsx)(e.code,{children:"rpmsg"})," ",(0,r.jsx)(e.code,{children:"virtio"})," \u8bbe\u5907\u3002\u8fd9\u6837\uff0c\u7279\u5b9a\u5e73\u53f0\u7684 ",(0,r.jsx)(e.code,{children:"remoteproc"})," \u9a71\u52a8\u7a0b\u5e8f\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e9b\u4f4e\u7ea7\u5904\u7406\u7a0b\u5e8f\uff0c\u7136\u540e\u6240\u6709 ",(0,r.jsx)(e.code,{children:"rpmsg"})," \u9a71\u52a8\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4f5c\u7528\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4ece\u6587\u4ef6\u7cfb\u7edf\u52a0\u8f7d\u56fa\u4ef6"}),"\n",(0,r.jsx)(e.li,{children:"\u51c6\u5907\u8fdc\u7a0b\u5904\u7406\u5668\u6240\u9700\u8d44\u6e90"}),"\n",(0,r.jsxs)(e.li,{children:["\u6ce8\u518c\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"rpmsg virtio"})," \u8bbe\u5907"]}),"\n",(0,r.jsx)(e.li,{children:"\u63d0\u4f9b\u5bf9\u8981\u63d0\u4f9b\u5bf9\u8fdc\u7a0b\u5904\u7406\u5668\u7684\u751f\u547d\u5468\u671f\u8fdb\u884c\u7ba1\u7406"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"img",src:t(12222).A+"",width:"817",height:"500"})}),"\n",(0,r.jsx)(e.p,{children:"\u6240\u4ee5\u56fa\u4ef6\u7684\u52a0\u8f7d\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"1. \u52a0\u8f7d\u56fa\u4ef6\n   1. \u8c03\u7528 firmware \u63a5\u53e3\u83b7\u53d6\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u56fa\u4ef6\n   2. \u89e3\u6790\u56fa\u4ef6\u7684 resource_table \u6bb5\uff0c\u8be5\u6bb5\u6709\u5982\u4e0b\u5185\u5bb9\n      1. \u58f0\u660e\u9700\u8981\u7684\u5185\u5b58\uff08Linux \u4e3a\u5176\u5206\u914d\uff09\n      2. \u58f0\u660e\u4f7f\u7528\u7684 vdev\uff08\u56fa\u5b9a\u4e3a\u4e00\u4e2a\uff09\n      3. \u58f0\u660e\u4f7f\u7528\u7684 vring\uff08\u56fa\u5b9a\u4e3a\u4e24\u4e2a\uff09\n   3. \u5c06\u56fa\u4ef6\u52a0\u8f7d\u5230\u6307\u5b9a\u5730\u5740\n2. \u6ce8\u518c rpmsg virtio \u8bbe\u5907\n   1. \u63d0\u4f9b vdev->ops\uff08\u57fa\u4e8e virtio \u63a5\u53e3\u5b9e\u73b0\u7684\uff09\n   2. \u4e0e rpmsg_bus \u9a71\u52a8\u5339\u914d\uff0c\u5b8c\u6210 rpmsg \u521d\u59cb\u5316\n3. \u542f\u52a8\u5c0f\u6838\n   1. \u8c03\u7528 rproc->ops->start\n"})}),"\n",(0,r.jsx)(e.h2,{id:"linux\u5185\u6838\u914d\u7f6e",children:"Linux\u5185\u6838\u914d\u7f6e"}),"\n",(0,r.jsxs)(e.p,{children:["\u9996\u5148\u9700\u8981\u914d\u7f6e\u8bbe\u5907\u6811\uff0c\u9884\u7559 C906 \u6838\u5fc3\u5185\u5b58\uff0c",(0,r.jsx)(e.code,{children:"buffer"})," \u5185\u5b58\uff0c",(0,r.jsx)(e.code,{children:"vring"})," \u5185\u5b58\u7b49\u3002\u5e76\u6b63\u786e\u914d\u7f6e ",(0,r.jsx)(e.code,{children:"rproc"})," \u4e0e ",(0,r.jsx)(e.code,{children:"rpbuf"}),"\uff0c\u4e5f\u4e0d\u8981\u5fd8\u8bb0\u914d\u7f6e ",(0,r.jsx)(e.code,{children:"firmware-name"}),"\uff0c\u4e0b\u9762\u7684\u914d\u7f6e\u662fT113\u9ed8\u8ba4\u63d0\u4f9b\u7684\u793a\u4f8b \u4e3a\u6d4b\u8bd5\u56fa\u4ef6\u6240\u4f7f\u7528\u7684\u5730\u5740\u3002\u4e0d\u540c\u7684\u56fa\u4ef6\u5730\u5740\u53ef\u80fd\u4e0d\u540c\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'reserved-memory {\n\t\t#address-cells = <2>;\n\t\t#size-cells = <2>;\n\t\tranges;\n\n\t\t/* c906 */\n\t\tc906_ddr: c906_ddr@42300000 {\n\t\t\treg = <0x0 0x42300000 0x0 0x00600000>;\n\t\t\tno-map;\n\t\t};\n\t\t/*\n\t\t * The name should be "vdev%dbuffer".\n\t\t * Its size should be not less than\n\t\t *     RPMSG_BUF_SIZE * (num of buffers in a vring) * 2\n\t\t *   = 512 * (num of buffers in a vring) * 2\n\t\t */\n\t\trv_vdev0buffer: vdev0buffer@42900000 {\n\t\t\tcompatible = "shared-dma-pool";\n\t\t\treg = <0x0 0x42900000 0x0 0x40000>;\n\t\t\tno-map;\n\t\t};\n\n\t\t/*\n\t\t * The name should be "vdev%dvring%d".\n\t\t * The size of each should be not less than\n\t\t *     PAGE_ALIGN(vring_size(num, align))\n\t\t *   = PAGE_ALIGN(16 * num + 6 + 2 * num + (pads for align) + 6 + 8 * num)\n\t\t *\n\t\t * (Please refer to the vring layout in include/uapi/linux/virtio_ring.h)\n\t\t */\n\t\trv_vdev0vring0: vdev0vring0@42940000 {\n\t\t\treg = <0x0 0x42940000 0x0 0x2000>;\n\t\t\tno-map;\n\t\t};\n\t\trv_vdev0vring1: vdev0vring1@42942000 {\n\t\t\treg = <0x0 0x42942000 0x0 0x2000>;\n\t\t\tno-map;\n\t\t};\n\n\t\t/* dsp0 */\n\t\tdsp0ddr: dsp0ddr@42000000 {\n\t\t\treg = <0x0 0x42000000 0x0 0x00100000>;\n\t\t\tno-map;\n\t\t};\n\n\t\tdsp0_rpbuf_reserved: dsp0_rpbuf@42244000 {\n\t\t\tcompatible = "shared-dma-pool";\n\t\t\tno-map;\n\t\t\treg = <0x0 0x42244000 0x0 0x8000>;\n\t\t};\n\n\t\t/*\n\t\t * The name should be "vdev%dbuffer".\n\t\t * Its size should be not less than\n\t\t *     RPMSG_BUF_SIZE * (num of buffers in a vring) * 2\n\t\t *   = 512 * (num of buffers in a vring) * 2\n\t\t */\n\t\tvdev0buffer: vdev0buffer@42200000 {\n\t\t\tcompatible = "shared-dma-pool";\n\t\t\treg = <0x0 0x42200000 0x0 0x40000>;\n\t\t\tno-map;\n\t\t};\n\n\t\t/*\n\t\t * The name should be "vdev%dvring%d".\n\t\t * The size of each should be not less than\n\t\t *     PAGE_ALIGN(vring_size(num, align))\n\t\t *   = PAGE_ALIGN(16 * num + 6 + 2 * num + (pads for align) + 6 + 8 * num)\n\t\t *\n\t\t * (Please refer to the vring layout in include/uapi/linux/virtio_ring.h)\n\t\t */\n\t\tvdev0vring0: vdev0vring0@42240000 {\n\t\t\treg = <0x0 0x42240000 0x0 0x2000>;\n\t\t\tno-map;\n\t\t};\n\t\tvdev0vring1: vdev0vring1@42242000 {\n\t\t\treg = <0x0 0x42242000 0x0 0x2000>;\n\t\t\tno-map;\n\t\t};\n\n\t\t/*\n\t\t* dsp ram addr\n\t\t*/\n\t\tdsp0dram: dsp0dram@400000 {\n\t\t\treg = <0x0 0x400000 0x0 0x10000>;\n\t\t\tno-map;\n\t\t};\n\t\tdsp0iram0: dsp0iram0@420000 {\n\t\t\treg = <0x0 0x420000 0x0 0x8000>;\n\t\t\tno-map;\n\t\t};\n\t\tdsp0iram1: dsp0iram1@440000 {\n\t\t\treg = <0x0 0x440000 0x0 0x8000>;\n\t\t\tno-map;\n\t\t};\n\t};\n\n\tmailbox_heartbeat: mailbox_heartbeat@0 {\n\t\tcompatible = "mailbox-heartbeat";\n\t\trproc-np = <&c906_rproc>;\n\t\tmboxes = <&msgbox 6>, <&msgbox 7>;\n\t\tmbox-names = "tx", "rx";\n\t\tstatus = "okay";\n\t};\n\n\tdsp0_rproc: dsp_rproc@0 {\n\t\tcompatible = "allwinner,hifi4-rproc", "simple-bus";\n\t\tclock-frequency = <600000000>;\n\t\tclocks = <&ccu CLK_PLL_PERIPH0_2X>, <&ccu CLK_DSP>, <&ccu CLK_BUS_DSP_CFG>, <&r_ccu CLK_R_AHB>;\n\t\tclock-names = "pll", "mod", "cfg", "ahbs";\n\t\tresets = <&ccu RST_BUS_DSP>, <&ccu RST_BUS_DSP_CFG>, <&ccu RST_BUS_DSP_DBG>, <&ccu RST_BUS_MSGBOX1>;\n\t\treset-names = "mod-rst", "cfg-rst", "dbg-rst", "msg-rst";\n\t\treg = <0x0 0x03000008 0x0 0x04>,\n\t\t      <0x0 0x01700000 0x0 0x40>;\n\t\treg-names = "sram-for-cpux", "hifi4-cfg";\n\t\tmboxes = <&msgbox 0>;\n\t\tmbox-names = "arm-kick";\n\t\tmemory-region = <&dsp0ddr>, <&vdev0buffer>, <&vdev0vring0>, <&vdev0vring1>,\n\t\t\t\t<&dsp0dram>, <&dsp0iram0>, <&dsp0iram1>;\n\t\tmemory-mappings =\n\t\t\t/* < DA\t\tlen\t\tPA >\t*/\n\t\t\t/* local SRAM via external bus */\n\t\t\t< 0x28000\t0x20000\t\t0x28000 >,\n\t\t\t/* local SRAM via internal bus */\n\t\t\t< 0x400000\t0x10000\t\t0x400000 >,\n\t\t\t< 0x420000\t0x8000\t\t0x420000 >,\n\t\t\t< 0x440000\t0x8000\t\t0x440000 >,\n\t\t\t/* DDR front 256MB */\n\t\t\t< 0x10000000\t0x10000000\t0x40000000 >,\n\t\t\t/* local SRAM via internal bus */\n\t\t\t< 0x20028000\t0x10000\t\t0x400000 >,\n\t\t\t< 0x20038000\t0x8000\t\t0x420000 >,\n\t\t\t< 0x20040000\t0x8000\t\t0x440000 >,\n\t\t\t/* DDR front 256MB */\n\t\t\t< 0x30000000\t0x10000000\t0x40000000 >,\n\t\t\t/* DDR front 1GB */\n\t\t\t< 0x40000000\t0x40000000\t0x40000000 >,\n\t\t\t/* DDR front 1GB */\n\t\t\t< 0x80000000\t0x40000000\t0x40000000 >,\n\t\t\t/* DDR front 1GB */\n\t\t\t< 0xC0000000\t0x40000000\t0x40000000 >;\n\n\t\tid = <0>;\n\t\tstatus = "okay";\n\t};\n\n\trpbuf_controller0: rpbuf_controller@0 {\n\t\tcompatible = "allwinner,rpbuf-controller";\n\t\tremoteproc = <&dsp0_rproc>;\n\t\tctrl_id = <0>;\t/* index of /dev/rpbuf_ctrl */\n\t\t//iommus = <&mmu_aw 5 1>;\n\t\tmemory-region = <&dsp0_rpbuf_reserved>;\n\t\tstatus = "okay";\n\t};\n\n\trpbuf_sample: rpbuf_sample@0 {\n\t\tcompatible = "allwinner,rpbuf-sample";\n\t\trpbuf = <&rpbuf_controller0>;\n\t\tstatus = "okay";\n\t};\n\n\tc906_rproc: c906_rproc@0 {\n\t\tcompatible = "allwinner,c906-rproc";\n\t\tclock-frequency = <800000000>;\n\t\tclocks = <&ccu CLK_PLL_PERIPH0_800M>, <&ccu CLK_RISCV>, <&ccu CLK_BUS_RISCV_CFG>, <&ccu CLK_RISCV_RST>, <&ccu CLK_BUS_RISCV>;\n\t\tclock-names = "pll", "mod", "cfg", "riscv-rst", "riscv-gate";\n\t\tresets = <&ccu RST_BUS_RISCV_CFG>, <&ccu RST_BUS_MSGBOX2>;\n\t\treset-names = "cfg-rst", "msg-rst";\n\t\tmemory-region = <&c906_ddr>, <&rv_vdev0buffer>, <&rv_vdev0vring0>, <&rv_vdev0vring1>;\n\t\treg = <0x0 0x06010000 0x0 0x1000>;\n\t\treg-names = "c906-cfg";\n\t\tmboxes = <&msgbox 4>;\n\t\tmbox-names = "arm-kick";\n\t\tmemory-mappings =\n\t\t\t/* DA \t         len         PA */\n\t\t\t/* DDR for c906  */\n\t\t\t< 0x40000000 0x10000000 0x40000000 >;\n\t\tfirmware-name = "amp_rv0.bin";\n\t\tstatus = "okay";\n\t};\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u914d\u7f6e\u5185\u6838\u9a71\u52a8",children:"\u914d\u7f6e\u5185\u6838\u9a71\u52a8"}),"\n",(0,r.jsxs)(e.p,{children:["\u63a5\u4e0b\u6765\u9700\u8981\u914d\u7f6e ",(0,r.jsx)(e.code,{children:"kernel"})," \u9009\u9879\uff0c\u914d\u7f6e\u9a71\u52a8\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"./build.sh menuconfig\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5e76\u52fe\u9009\u4ee5\u4e0b\u9a71\u52a8\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"> Device Drivers > Mailbox Hardware Support\n\t--- Mailbox Hardware Support\n\t< >   Platform MHU Mailbox\n\t< >   Altera Mailbox\n\t< >   Mailbox Test Client\n\t< >   Mailbox Heartbeat driver\n\t<*>   Allwinner mailbox support\n\t[ ]     Allwinner mailbox support txdone irq\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"> Device Drivers > Remoteproc drivers\n\t[*] Support for Remote Processor subsystem\n\t\t<*>   Allwinner remoteproc support\n\t\t<*>   Allwinner remoteproc hifi4 boot\n\t\t<*>   Allwinner remoteproc c906 boot\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"> Device Drivers > Rpmsg drivers\n\t\t< > RPMSG device interface\n\t\t< > Qualcomm RPM Glink driver\n\t\t-*- sunxi amp msgbox driver\n\t\t< > support send dsp standby msg when suspend.\n\t\t<*> Virtio RPMSG bus driver\n\t\t< > Allwinner rpmsg notify driver\n\t\t<*> Allwinnertech RPMSG hearbeat driver\n\t\t<*> Allwinner RPMsg tty driver\n\t\t< > Allwinner RPMsg client sample\n\t\t<*> sunxi rpmsg ctrl driver\n\t\t< > Allwinner rpmsg openamp test driver\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u52a0\u8f7d\u5c0f\u6838\u56fa\u4ef6",children:"\u52a0\u8f7d\u5c0f\u6838\u56fa\u4ef6"}),"\n",(0,r.jsxs)(e.p,{children:["\u6d4b\u8bd5\u56fa\u4ef6\u4e0b\u8f7d\u5730\u5740\uff1a ",(0,r.jsx)(e.a,{href:"https://github.com/DongshanPI/T113M4-DevKit_TinaSDK5",children:"https://github.com/DongshanPI/T113M4-DevKit_TinaSDK5"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u70e7\u5f55\u542f\u52a8\u7cfb\u7edf\u540e\uff0c\u53ef\u4ee5\u5728 ",(0,r.jsx)(e.code,{children:"/sys/kernel/debug/remoteproc/"})," \u8282\u70b9\u627e\u5230 ",(0,r.jsx)(e.code,{children:"remoteproc1"})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909160554949",src:t(38763).A+"",width:"1288",height:"145"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"cat"})," \u547d\u4ee4\u68c0\u67e5\u5c0f\u6838\u76ee\u524d\u7684\u72b6\u51b5"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"cat /sys/kernel/debug/remoteproc/remoteproc1/state\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909160830827",src:t(41187).A+"",width:"2291",height:"285"})}),"\n",(0,r.jsxs)(e.p,{children:["\u53ef\u4ee5\u770b\u5230\u63d0\u793a\u6ca1\u6709 state \u8fd9\u4e2a\u8282\u70b9\u4fe1\u606f\uff0c\u90a3\u4e48\u5e94\u8be5\u662f\u6ca1\u6709\u9ed8\u8ba4\u52a0\u8f7d c906 \u5c0f\u6838\u56fa\u4ef6\u3002\u6b64\u65f6\u6211\u4eec\u9700\u8981\u628a\u51c6\u5907\u597d\u7684\u56fa\u4ef6\u653e\u7f6e\u5230\u5f00\u53d1\u677f\u7684 ",(0,r.jsx)(e.code,{children:"lib/firmware"})," \u6587\u4ef6\u5939\u5185\u3002\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"adb"})," \u4e0a\u4f20\u5c0f\u6838\u56fa\u4ef6\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7136\u540e\u6211\u4eec\u5c06 c906 \u56fa\u4ef6\u7f6e\u4e8e ",(0,r.jsx)(e.code,{children:"firmware"})," \u8282\u70b9\u5185\uff0c\u5e76\u542f\u52a8\u56fa\u4ef6\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"echo amp_rv0.bin > /sys/class/remoteproc/remoteproc1/firmware\necho start > /sys/class/remoteproc/remoteproc1/state\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6b64\u65f6\u53ef\u4ee5\u770b\u5230 ",(0,r.jsx)(e.code,{children:"remoteproc remoteproc1: remote processor c906_rproc is now up"}),"\uff0c\u540c\u65f6\u67e5\u770b\u72b6\u6001\u4e5f\u663e\u793a\u4e86 ",(0,r.jsx)(e.code,{children:"running"})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909161015908",src:t(703).A+"",width:"2582",height:"586"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6b64\u65f6\u4e5f\u53ef\u4ee5\u7528 ",(0,r.jsx)(e.code,{children:"stop"})," \u547d\u4ee4\u505c\u6b62\u5c0f\u6838\u8fd0\u884c"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"echo stop > /sys/class/remoteproc/remoteproc1/state\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909161103533",src:t(70897).A+"",width:"2969",height:"204"})}),"\n",(0,r.jsx)(e.h3,{id:"amp-shell\u6d4b\u8bd5\u5c0f\u6838",children:"AMP SHELL\u6d4b\u8bd5\u5c0f\u6838"}),"\n",(0,r.jsx)(e.p,{children:"Linux\u7aef\u63d0\u4f9b\u4e86\u8fdb\u5165\u4ece\u6838\u63a7\u5236\u53f0\u7684\u529f\u80fd\u4e5f\u5c31\u662fAMP SHELL\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728Linux\u7ec8\u7aef\u4e2d\uff0c\u901a\u8fc7 amp_shell \u547d\u4ee4\u8fdb\u5165 C906 \u5f02\u6784\u6838\u5fc3\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u9996\u5148\u786e\u4fddC906 \u5c0f\u6838\u5df2\u7ecf\u6b63\u5e38\u542f\u52a8\uff0c\u4e4b\u540e\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8fdb\u5165\u5c0f\u6838 shell \u7ec8\u7aef\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"root@TinaLinux:~# amp_shell  -d /dev/rpmsg_ctrl-c906_rproc@0\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4fbf\u53ef\u4ee5\u542f\u52a8\u5c0f\u6838\u7684\u56fa\u4ef6"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240910172921007",src:t(6243).A+"",width:"2283",height:"745"})}),"\n",(0,r.jsx)(e.h2,{id:"rtos\u7cfb\u7edf\u4ecb\u7ecd",children:"RTOS\u7cfb\u7edf\u4ecb\u7ecd"}),"\n",(0,r.jsx)(e.h3,{id:"\u7cfb\u7edf\u67b6\u6784",children:"\u7cfb\u7edf\u67b6\u6784"}),"\n",(0,r.jsx)(e.p,{children:"RTOS \u7cfb\u7edf\u662f\u57fa\u4e8eFreeRTOS \u5185\u6838\u7684\u8f6f\u4ef6\u5f00\u53d1\u5305\uff0c\u5305\u542b\u4e86\u7cfb\u7edf\u5f00\u53d1\u7528\u5230\u7684\u5185\u6838\u6e90\u7801\u3001\u9a71\u52a8\u3001\u5de5\u5177\u3001\u7ec4\u4ef6\u4e0e\u5e94\u7528\u7a0b\u5e8f\u5305\u3002\u901a\u8fc7Makefile \u811a\u672c\u548cKconfig \u914d\u7f6e\u6587\u4ef6\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u901a\u8fc7menuconfig \u8fdb\u884c\u4e2a\u6027\u5316\u88c1\u51cf\uff0c\u7f16\u8bd1\u51fa\u4e00\u4e2a\u53ef\u4ee5\u76f4\u63a5\u70e7\u5199\u5230\u673a\u5668\u4e0a\u8fd0\u884c\u7684RTOS \u7cfb\u7edf\u8f6f\u4ef6\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240909152743452",src:t(7383).A+"",width:"2448",height:"850"})}),"\n",(0,r.jsx)(e.p,{children:"RTOS \u7cfb\u7edf\u6846\u56fe\u5982\u4e0a\u56fe\uff0c\u4ec5\u4ece\u8f6f\u4ef6\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u4ece\u4e0b\u81f3\u4e0a\u5206\u4e3a\u5185\u6838\u5c42\u3001\u7ec4\u4ef6\u5c42\u3001\u5e94\u7528\u5c42\u4e09\u4e2a\u5c42\u6b21\u3002\u5404\u5c42\u6b21\u4e3b\u8981\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Kernel\uff1a\u5185\u6838\u5c42\u5305\u62ecFreeRTOS \u6838\u5fc3\u7cfb\u7edf\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u7f51\u7edc\u7cfb\u7edf\u3001BSP \u9a71\u52a8\u7b49\u3002"}),"\n",(0,r.jsx)(e.li,{children:"Component\uff1a\u7ec4\u4ef6\u5c42\u5305\u62ec\u63a7\u5236\u53f0\u3001\u591a\u5a92\u4f53\u3001\u529f\u8017\u7ba1\u7406\u3001OTA\u3001\u97f3\u9891\u7cfb\u7edf\u3001\u663e\u793a\u7cfb\u7edf\u3001\u56fe\u50cf\u91c7\u96c6\u7b49\u3002"}),"\n",(0,r.jsx)(e.li,{children:"APP\uff1a\u5e94\u7528\u5c42\u5305\u62ec\u5404\u79cd\u5e94\u7528demo\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u76ee\u5f55\u7ed3\u6784",children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"rtos\n\u251c\u2500\u2500 board # \u5305\u542b\u5404SoC\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\n\u2502 \u2514\u2500\u2500 t113_s3p_c906 # t113_s3p_c906\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\n\u2502 \u2514\u2500\u2500 t113_s4_c906 # t113_s4_c906\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\n\u2502 \u2514\u2500\u2500 t113_s4p_c906 # t113_s4p_c906\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\n\u2502 \u2514\u2500\u2500 XXX # XXX\u5e73\u53f0\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\n\u251c\u2500\u2500 envsetup.sh # SDK\u73af\u5883\u521d\u59cb\u5316\u811a\u672c\n\u251c\u2500\u2500 lichee\n\u2502 \u251c\u2500\u2500 dsp # DSP FreeRTOS\u7cfb\u7edf\n\u2502 \u251c\u2500\u2500 rtos # ARM/RISC\u2011V\u67b6\u6784\u7684FreeRTOS\u7cfb\u7edf\n\u2502 \u251c\u2500\u2500 rtos\u2011components # FreeRTOS\u516c\u5171\u7ec4\u4ef6\n\u2502 \u2514\u2500\u2500 rtos\u2011hal # BSP\u9a71\u52a8\n\u2514\u2500\u2500 tools # \u6253\u5305\u76f8\u5173\u5de5\u5177\u811a\u672c\u76ee\u5f55\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u6240\u4f7f\u7528RTOS SDK \u76ee\u5f55\u7ed3\u6784\u5982\u4e0a\u6240\u793a\uff0c\u4e3b\u8981\u5305\u62ec\u5982\u4e0b\u51e0\u4e2a\u5173\u952e\u76ee\u5f55\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"board\uff1a\u677f\u7ea7\u914d\u7f6e\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u82af\u7247\u65b9\u6848\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3b\u8981\u5305\u62ec\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6sys_config.fex\u7b49\u3002"}),"\n",(0,r.jsx)(e.li,{children:"lichee/dsp\uff1a\u5b58 \u653eDSP FreeRTOS \u7cfb\u7edf\u3001\u7ec4\u4ef6\u3001\u5e94\u7528\u3002"}),"\n",(0,r.jsx)(e.li,{children:"lichee/rtos\uff1a\u5b58\u653eARM/RISC\u2011V \u67b6\u6784FreeRTOS \u7cfb\u7edf\u3001\u7ec4\u4ef6\u3001\u5e94\u7528\u3002"}),"\n",(0,r.jsx)(e.li,{children:"lichee/rtos\u2011components\uff1a\u516c\u5171\u7ec4\u4ef6\u76ee\u5f55\uff0clichee/dsp \u4e0elichee/rtos \u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5\u7ec4\u4ef6\u3002"}),"\n",(0,r.jsx)(e.li,{children:"lichee/rtos\u2011hal\uff1aBSP \u9a71\u52a8\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u5404\u79cd\u9a71\u52a8\u4ee3\u7801\u3002\u5bf9lichee/dsp \u4e0elichee/rtos \u901a\u7528\u3002"}),"\n",(0,r.jsx)(e.li,{children:"tools\uff1a\u5de5\u5177\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u7f16\u8bd1\u6253\u5305\u76f8\u5173\u7684\u811a\u672c\u3001\u5de5\u5177\u7b49\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4e0b\u9762\u5bf9lichee/rtos\u3001lichee/rtos\u2011hal \u76ee\u5f55\u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\u3002lichee/dsp \u76ee\u5f55\u4e0elichee/rtos \u76ee\u5f55\u7c7b\u4f3c\uff0c\u6b64\u5904\u4e0d\u505a\u4ecb\u7ecd\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"licheertos-\u76ee\u5f55",children:"lichee/rtos \u76ee\u5f55"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos\n\u251c\u2500\u2500 arch # \u5904\u7406\u5668\u67b6\u6784\u76f8\u5173\n\u251c\u2500\u2500 build # \u7f16\u8bd1\u4e34\u65f6\u6587\u4ef6\u8f93\u51fa\u76ee\u5f55\n\u251c\u2500\u2500 components # \u7ec4\u4ef6\n\u251c\u2500\u2500 drivers # \u9a71\u52a8\n\u251c\u2500\u2500 include # \u5934\u6587\u4ef6\n\u251c\u2500\u2500 kernel # FreeRTOS \u5185\u6838\n\u251c\u2500\u2500 projects # \u65b9\u6848\u5de5\u7a0b\n\u251c\u2500\u2500 scripts\n\u2514\u2500\u2500 tools # \u5de5\u5177\u94fe\n"})}),"\n",(0,r.jsx)(e.p,{children:"lichee/rtos \u76ee\u5f55\u4e3b\u8981\u5305\u62ecarch\uff08\u67b6\u6784\u76f8\u5173\uff09\u3001components\uff08\u7ec4\u4ef6\uff09\u3001drivers\uff08\u9a71\u52a8\uff09\u3001include \uff08\u5934\u6587\u4ef6\uff09\u3001kernel\uff08\u5185\u6838\uff09\u3001projects\uff08\u5de5\u7a0b\uff09\u3001toos(\u5de5\u5177\u94fe) \u7b49\u76ee\u5f55\uff0c\u4e0b\u9762\u5bf9\u5e38\u7528\u91cd\u8981\u76ee\u5f55\u5206\u522b\u8fdb\u884c\u4ecb\u7ecd\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"arch \u76ee\u5f55\narch \u76ee\u5f55\u4e3b\u8981\u653e\u7f6e\u8ddfSoC \u67b6\u6784\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u6bcf\u4e2aSoC \u5355\u72ec\u76ee\u5f55\u7ba1\u7406\uff0c\u4e3b\u8981\u5305\u62ec\u8ddfrisc\u2011v \u67b6\u6784\u76f8\u5173\u7684ARCH \u521d\u59cb\u5316\u3001\u4e2d\u65ad\u5904\u7406\u3001\u5f02\u5e38\u5904\u7406\u3001\u5185\u5b58\u6620\u5c04\u76f8\u5173\u529f\u80fd\u7684\u5b9e\u73b0\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  lichee/rtos/arch/\n  \u251c\u2500\u2500 common\n  \u2514\u2500\u2500 risc\u2011v\n  \u251c\u2500\u2500 arch.mk\n  \u251c\u2500\u2500 c906\n  \u251c\u2500\u2500 common\n  \u251c\u2500\u2500 e906\n  \u251c\u2500\u2500 includes\n  \u251c\u2500\u2500 Kconfig\n  \u251c\u2500\u2500 Makefile\n  \u251c\u2500\u2500 sun55iw3p1\n  \u2514\u2500\u2500 sun8iw20p1\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"components \u76ee\u5f55\ncomponents \u76ee\u5f55\u5305\u542ballwinner \u548c\u7b2c\u4e09\u65b9\u7684\u7ec4\u4ef6\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos/components/\n\u251c\u2500\u2500 aw\n\u2502 \u251c\u2500\u2500 blkpart\n\u2502 \u251c\u2500\u2500 bluetooth\n\u2502 \u251c\u2500\u2500 csi\n\u2502 \u251c\u2500\u2500 devfs\n\u2502 \u251c\u2500\u2500 healthd\n\u2502 \u251c\u2500\u2500 ......\n\u2502 \u251c\u2500\u2500 watchpoint\n\u2502 \u2514\u2500\u2500 wireless_video\n\u251c\u2500\u2500 common \u2011> ../../rtos\u2011components\n\u2514\u2500\u2500 thirdparty\n\u251c\u2500\u2500 common\n\u251c\u2500\u2500 console\n\u251c\u2500\u2500 cplusplus\n\u251c\u2500\u2500 elmfat\n\u251c\u2500\u2500 finsh_cli\n\u251c\u2500\u2500 ......\n\u2514\u2500\u2500 vfs\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"drivers \u76ee\u5f55\ndrivers \u76ee\u5f55\u5305\u542b\u6240\u9700\u7684\u5916\u8bbe\u9a71\u52a8\uff0c\u4e3b\u8981\u5305\u62ec\u5404\u5916\u8bbe\u63a7\u5236\u5668\u9a71\u52a8\u7684\u5177\u4f53\u5b9e\u73b0\uff08hal \u8f6f\u8fde\u63a5\uff09\u4ee5\u53caOSAL \u5c42\u63a5\u53e3\uff08osal\uff09\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos/drivers/\n\u251c\u2500\u2500 drv\n\u2502 \u251c\u2500\u2500 cpufreq\n\u2502 \u251c\u2500\u2500 leds\n\u2502 \u251c\u2500\u2500 uart\n\u2502 \u251c\u2500\u2500 ......\n\u2502 \u2514\u2500\u2500 wireless\n\u251c\u2500\u2500 hal \u2011> ../../rtos\u2011hal/\n\u2514\u2500\u2500 osal\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"include \u76ee\u5f55\ninclude \u76ee\u5f55\u7edf\u4e00\u7ba1\u7406\u5404\u6a21\u5757\u63d0\u4f9b\u7684\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u53ca\u51fd\u6570\u58f0\u660e"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos/include/\n\u251c\u2500\u2500 arch # \u67b6\u6784\u76f8\u5173\u5934\u6587\u4ef6\n\u251c\u2500\u2500 FreeRTOS_POSIX # POSIX\u5934\u6587\u4ef6\n\u251c\u2500\u2500 ......\n\u2514\u2500\u2500 vsprintf.h\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"kernel \u76ee\u5f55\nkernel \u76ee\u5f55\u4e3b\u8981\u5305\u542bFreeRTOS \u7684kernel \u6e90\u7801\uff0c\u5168\u5fd7\u5b9e\u73b0\u7684\u7cfb\u7edf\u529f\u80fd\u76f8\u5173\u4ee3\u7801\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos/kernel/\n\u251c\u2500\u2500 FreeRTOS\u2011orig\n\u2502 \u2514\u2500\u2500 Source\n\u2514\u2500\u2500 Posix\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"projects \u76ee\u5f55\nprojects \u76ee\u5f55\u4e0b\u7684\u6bcf\u4e00\u4e2a\u5b50\u76ee\u5f55\u4ee3\u8868\u4e00\u4e2aproject\uff0c\u5b9e\u73b0main \u5165\u53e3\uff0c\u9009\u62e9\u4e0d\u540c\u7684project \u7f16\u8bd1\u51fa\n\u6765\u7684bin \u5177\u6709\u4e0d\u540c\u529f\u80fd\uff0c\u6bcf\u4e2aproject \u6709\u72ec\u7acb\u7684FreeRTOSConfig \u914d\u7f6e\u3002\u4f8b\u5982T113\uff0c\u5176\u5bf9\u5e94\u4e8e\nt113_c906 \u5b50\u76ee\u5f55\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos/projects/\n\u251c\u2500\u2500 Kconfig\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 t113_c906\n\u251c\u2500\u2500 evb\n\u2502 \u251c\u2500\u2500 freertos.lds.S\n\u2502 \u251c\u2500\u2500 ......\n\u2502 \u2514\u2500\u2500 src\n\u2502 \u251c\u2500\u2500 main.c\n\u2502 \u251c\u2500\u2500 ......\n\u2502 \u2514\u2500\u2500 FreeRTOSConfig.h\n\u2514\u2500\u2500 Makefile\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["tools \u76ee\u5f55","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"risc\u2011v \u67b6\u6784\u8fd9\u4e2a\u76ee\u5f55\u4e3b\u8981\u5305\u542b\u4e00\u4e9b\u9884\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u76ee\u524drisc\u2011v \u57fa\u4e8eGCC 8.4.0 \u7684\u4ea4\u53c9\u7f16\u8bd1\u5668\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"xxx@xxx:lichee/rtos/tools$ ./riscv64\u2011elf\u2011x86_64\u201120201104/bin/riscv64\u2011unknown\u2011elf\u2011gcc \u2011\u2011version\nriscv64\u2011unknown\u2011elf\u2011gcc (T\u2011HEAD RISCV Tools V1.10.2 B20201104) 8.4.0\nCopyright (C) 2018 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions. There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n"})}),"\n",(0,r.jsx)(e.h4,{id:"licheertoshal-\u76ee\u5f55",children:"lichee/rtos\u2011hal \u76ee\u5f55"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"lichee/rtos\u2011hal \u76ee\u5f55\u4e3aBSP \u9a71\u52a8\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u5404\u79cd\u9a71\u52a8\u4ee3\u7801\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"lichee/rtos/drivers \u76ee\u5f55\u4e0b\u7684rtos\u2011hal \u5b50\u76ee\u5f55\u8f6f\u94fe\u63a5\u5230\u8be5\u76ee\u5f55\uff0c\u4e0b\u9762\u5bf9\u8be5\u76ee\u5f55\u8fdb\u884c\u4ecb\u7ecd\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos\u2011hal\n\u251c\u2500\u2500 hal # BSP\u9a71\u52a8\u4ee3\u7801\n\u251c\u2500\u2500 include # \u9a71\u52a8\u76f8\u5173\u5934\u6587\u4ef6\n\u2514\u2500\u2500 tools\n"})}),"\n",(0,r.jsx)(e.p,{children:"lichee/rtos\u2011hal \u76ee\u5f55\u4e3b\u8981\u5305\u62echal\uff08BSP \u9a71\u52a8\u4ee3\u7801\uff09\u3001include\uff08\u9a71\u52a8\u76f8\u5173\u5934\u6587\u4ef6\uff09\u7b49\u76ee\u5f55\uff0c\u4e0b\u9762\u5206\u522b\u5bf9\u5176\u8fdb\u884c\u4ecb\u7ecd\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"hal \u76ee\u5f55\nhal \u76ee\u5f55\u4e3b\u8981\u5305\u542b\u5404\u5916\u8bbe\u9a71\u52a8\u4ee3\u7801\u4ee5\u53ca\u9a71\u52a8\u6d4b\u8bd5\u4ee3\u7801\uff0csource \u5b50\u76ee\u5f55\u4e3a\u9a71\u52a8\u4ee3\u7801\uff0ctest \u5b50\u76ee\u5f55\u4e3a\u9a71\u52a8\u6d4b\u8bd5\u4ee3\u7801\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"lichee/rtos\u2011hal/hal\n  \u251c\u2500\u2500 Makefile\n  \u251c\u2500\u2500 source\n  \u2502 \u251c\u2500\u2500 ccmu\n  \u2502 \u251c\u2500\u2500 gpio\n  \u2502 \u251c\u2500\u2500 ......\n  \u2502 \u251c\u2500\u2500 uart\n  \u2502 \u2514\u2500\u2500 watchdog\n  \u2514\u2500\u2500 test\n  \u251c\u2500\u2500 ccmu\n  \u251c\u2500\u2500 gpio\n  \u251c\u2500\u2500 ......\n  \u251c\u2500\u2500 uart\n  \u2514\u2500\u2500 watchdog\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"include \u76ee\u5f55\ninclude \u76ee\u5f55\u4e3b\u8981\u5305\u542b\u9a71\u52a8\u76f8\u5173\u5934\u6587\u4ef6\u4ee5\u53ca\u7cfb\u7edf\u76f8\u5173\u63a5\u53e3\u5934\u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  lichee/rtos\u2011hal/include\n  \u251c\u2500\u2500 hal\n  \u2502 \u251c\u2500\u2500 aw\u2011alsa\u2011lib\n  \u2502 \u251c\u2500\u2500 aw_common.h\n  \u2502 \u251c\u2500\u2500 ......\n  \u2502 \u251c\u2500\u2500 sunxi_hal_usb.h\n  \u2502 \u251c\u2500\u2500 sunxi_hal_watchdog.h\n  \u2502 \u2514\u2500\u2500 video\n  \u2514\u2500\u2500 osal\n  \u251c\u2500\u2500 hal_atomic.h\n  \u251c\u2500\u2500 hal_cache.h\n  \u251c\u2500\u2500 ......\n  \u251c\u2500\u2500 hal_waitqueue.h\n  \u2514\u2500\u2500 hal_workqueue.h\n"})}),"\n",(0,r.jsx)(e.h2,{id:"rtos\u5f00\u53d1\u8bf4\u660e",children:"RTOS\u5f00\u53d1\u8bf4\u660e"}),"\n",(0,r.jsx)(e.p,{children:"RTOS \u73af\u5883\u5df2\u96c6\u6210\u5230Tina Linux \u5f00\u53d1\u73af\u5883\uff0c\u901a\u8fc7\u5168\u5fd7\u4ee3\u7801\u670d\u52a1\u5668\u5bf9\u5916\u53d1\u5e03\u3002Tina Linux \u5f00\u53d1\u73af\u5883\u4e0b\u7684rtos \u5b50\u76ee\u5f55\u5373\u4e3aRTOS \u73af\u5883\u3002"}),"\n",(0,r.jsx)(e.p,{children:"Tina \u96c6\u6210\u4e86RTOS \u7684\u7f16\u8bd1\u3001\u6253\u5305\u529f\u80fd\uff0c\u800c\u4e14\u9002\u7528\u4e8eopenwrt\u3001buildroot \u7b49\u6587\u4ef6\u7cfb\u7edf\u3002\u8fd9\u91cc\u4ee5T113\u2011S4 \u4f5c\u4e3a\u4f8b\u5b50\u8fdb\u884c\u9610\u8ff0\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5173\u8054rtos\u65b9\u6848",children:"\u5173\u8054RTOS\u65b9\u6848"}),"\n",(0,r.jsxs)(e.p,{children:["\u5728BoardConfig.mk \u6587\u4ef6\u914d\u7f6eRTOS \u65b9\u6848\u540d\uff0c\u5173\u952e\u5b57\u6bb5\u4e3aLICHEE_RTOS_PROJECT_NAME:=xxxxx\u3002\u76ee\u524d\u4f7f\u7528",(0,r.jsx)(e.strong,{children:"t113_s4_c906_evb1_auto"}),"\u7684RTOS \u65b9\u6848\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539LICHEE_RTOS_PROJECT_NAME \u5b57\u6bb5\uff0c\u66f4\u6539\u6784\u5efaRTOS \u65b9\u6848\u3002\u8fdb\u5165Tina \u7684rtos \u76ee\u5f55(\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b)\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u652f\u6301RTOS \u65b9\u6848\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240910183758461",src:t(21257).A+"",width:"2024",height:"972"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\u251c\u2500\u2500 board\n\u251c\u2500\u2500 envsetup.sh \u2011> tools/scripts/source_envsetup.sh\n\u251c\u2500\u2500 lichee\n\u251c\u2500\u2500 out\n\u2514\u2500\u2500 tools\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\n",(0,r.jsx)(e.code,{children:"source envsetup.sh"})," # \u914d\u7f6e\u73af\u5883\u53d8\u91cf\n",(0,r.jsx)(e.code,{children:"lunch_rtos"})," # \u9009\u62e9\u7f16\u8bd1\u65b9\u6848\n\u6211\u4eec\u770b\u5230\u53ef\u4ee5\u9009\u62e9RTOS \u65b9\u6848\uff0c\u5373\u662fLICHEE_RTOS_PROJECT_NAME \u5b57\u6bb5\u53ef\u4ee5\u914d\u7f6e\u7684RTOS \u65b9\u6848\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"1. t113_i_c906_evb1_auto\n2. t113_s3p_c906_evb1_auto\n3. t113_s3p_c906_evb1_auto_fastboot\n4. t113_s3p_c906_evb1_auto_fastboot_video\n5. t113_s3p_c906_evb1_auto_non_os\n6. t113_s3p_c906_example_demo\n7. t113_s4_c906_evb1_auto\n8. t113_s4_c906_evb1_auto_fastboot_video\n9. t113_s4p_c906_evb1_auto\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240910184123073",src:t(6447).A+"",width:"3228",height:"1423"})}),"\n",(0,r.jsx)(e.h3,{id:"\u7f16\u8bd1rtos\u65b9\u6848",children:"\u7f16\u8bd1RTOS\u65b9\u6848"}),"\n",(0,r.jsx)(e.p,{children:"\u91cd\u65b0\u6253\u5f00\u4e00\u4e2a\u7ec8\u7aef\uff0c\u907f\u514d\u73af\u5883\u53d8\u91cf\u51b2\u7a81\uff0c\u5728Tina SDK \u6839\u76ee\u5f55\u4e2d\uff0c\u5148\u9009\u62e9\u597d\u6574\u4f53\u5e73\u53f0\u65b9\u6848\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"buildroot-\u65b9\u6848",children:"buildroot \u65b9\u6848"}),"\n",(0,r.jsxs)(e.p,{children:["1\u3001\u9996\u5148\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u9009\u62e9\u6574\u4f53\u5e73\u53f0\u65b9\u6848\n",(0,r.jsx)(e.code,{children:"./build.sh config"}),"\n2\u3001\u7136\u540eRTOS \u76f8\u5173\u64cd\u4f5c\u547d\u4ee4\u5982\u4e0b\n",(0,r.jsx)(e.code,{children:"./build.sh rtos"})," #\u5355\u72ec\u7f16\u8bd1RTOS\u65b9\u6848\n",(0,r.jsx)(e.code,{children:"./build.sh rtos menuconfig"})," #\u4fee\u6539RTOS\u914d\u7f6e\u6587\u4ef6\n",(0,r.jsx)(e.code,{children:"./build.sh rtos clean"})," #\u6e05\u9664RTOS\u7f16\u8bd1\u4e2d\u95f4\u6587\u4ef6"]}),"\n",(0,r.jsx)(e.p,{children:"\u8bf4\u660e: \u6267\u884c./build.sh \u4e0d\u4f1a\u7f16\u8bd1RTOS"}),"\n",(0,r.jsx)(e.h4,{id:"openwrt-\u65b9\u6848",children:"openwrt \u65b9\u6848"}),"\n",(0,r.jsxs)(e.p,{children:["1\u3001\u9996\u5148\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u9009\u62e9\u6574\u4f53\u5e73\u53f0\u65b9\u6848\n",(0,r.jsx)(e.code,{children:"source build/envsetup.sh"})," #\u751f\u6548\u73af\u5883\u53d8\u91cf\n",(0,r.jsx)(e.code,{children:"lunch"})," #\u9009\u62e9openwrt\u65b9\u6848\n2\u3001\u6267\u884c",(0,r.jsx)(e.code,{children:"make"})," \u4f1a\u5148\u7f16\u8bd1RTOS\uff0c\u518d\u7f16\u8bd1Tina"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7f16\u8bd1\u5feb\u6377\u547d\u4ee4",children:"\u7f16\u8bd1\u5feb\u6377\u547d\u4ee4"}),"\n",(0,r.jsx)(e.p,{children:"\u5728Tina \u6839\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e86source build/envsetup.sh \u540e\uff0c\u53ef\u4ee5\u4f7f\u7528RTOS \u5feb\u6377\u547d\u4ee4"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u547d\u4ee4\u6709\u6548\u76ee\u5f55"}),(0,r.jsx)(e.th,{children:"\u4f5c\u7528"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mrtos"}),(0,r.jsx)(e.td,{children:"Tina \u73af\u5883\u4e0b\u4efb\u610f\u76ee\u5f55"}),(0,r.jsx)(e.td,{children:"\u5355\u72ec\u7f16\u8bd1RTOS \u65b9\u6848"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mrtos menuconfig"}),(0,r.jsx)(e.td,{children:"Tina \u73af\u5883\u4e0b\u4efb\u610f\u76ee\u5f55"}),(0,r.jsx)(e.td,{children:"\u4fee\u6539RTOS \u914d\u7f6e\u6587\u4ef6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mrtos clean"}),(0,r.jsx)(e.td,{children:"Tina \u73af\u5883\u4e0b\u4efb\u610f\u76ee\u5f55"}),(0,r.jsx)(e.td,{children:"\u6e05\u9664RTOS \u7f16\u8bd1\u4e2d\u95f4\u6587\u4ef6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"crtos"}),(0,r.jsx)(e.td,{children:"Tina \u73af\u5883\u4e0b\u4efb\u610f\u76ee\u5f55"}),(0,r.jsx)(e.td,{children:"\u8fdb\u5165RTOS \u6e90\u7801\u76ee\u5f55"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"crtos\u2011hal"}),(0,r.jsx)(e.td,{children:"Tina \u73af\u5883\u4e0b\u4efb\u610f\u76ee\u5f55"}),(0,r.jsx)(e.td,{children:"\u8fdb\u5165RTOS\u2011HAL \u6e90\u7801\u76ee\u5f55"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:"\u7136\u540e\u5c06Tina \u73af\u5883\u91cd\u65b0\u7f16\u8bd1\u548c\u6253\u5305\uff0c\u786e\u4fddRTOS \u7f16\u8bd1\u56fa\u4ef6amp_rv0.bin \u6253\u5305\u5230\u6839\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u8bf4\u660e buildroot \u9700\u8981\u6267\u884c",(0,r.jsx)(e.code,{children:"./build.sh && ./build.sh pack"})," \u547d\u4ee4\n\u8bf4\u660e openwrt \u9700\u8981\u6267\u884c",(0,r.jsx)(e.code,{children:"make && pack "}),"\u547d\u4ee4"]}),"\n",(0,r.jsx)(e.p,{children:"\u6253\u5305\u5b8c\u6210\u540e\uff0c\u751f\u4ea7\u7684\u56fa\u4ef6\u4f4d\u4e8etina5.0/out/t113_s4_linux_evb1_auto_uart0.img\uff0c\u53ef\u4ee5\u4f7f\u7528PhoenixSuit \u5de5\u5177\u70e7\u5f55\u5230\u5f00\u53d1\u677f\u4e0a\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"rtos-\u56fa\u4ef6\u6253\u5305",children:"RTOS \u56fa\u4ef6\u6253\u5305"}),"\n",(0,r.jsx)(e.p,{children:"\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c \u751f\u6210\u7684\u955c\u50cf\u6587\u4ef6\u4f1a\u81ea\u52a8\u62f7\u8d1d\u5230\u5bf9\u5e94\u5e73\u53f0\u65b9\u6848\u4e2d\uff0c \u5e76\u4e14rt_system.elf \u91cd\u540d\u4e3a amp_rv0.bin \u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"image-20240910184339126",src:t(97161).A+"",width:"3772",height:"1726"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},25919:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909152022940-c95ee03d001d24f1c447cb637d93eb77.png"},28316:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909151155233-ece3f35e6be361bcd9ed43f6a61ebda7.png"},28453:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>l});var s=t(96540);const r={},i=s.createContext(r);function c(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(i.Provider,{value:e},n.children)}},28722:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909151608100-1dce711208f270c4f103409b27e202d9.png"},38763:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909160554949-5c3b932cb0929739e5df7333ae140199.png"},41187:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909160830827-be38abcb64e4d2b546f14c01d9f94661.png"},49179:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909151235761-6173a3b5d070b7c60235c9fa450a6f3f.png"},67284:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20220704160952936-d935d39ac5331928866997e523ba653d.png"},70897:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240909161103533-a8abfb61bed53f5a3fb89e2e3173a8e0.png"},75890:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20220704161948895-f6b3d96fccdf2e952423544492bacd76.png"},80406:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/2958689-e0da20bb240ff26d-99bdcc4e062f081332514baa9cb7819f.png"},82220:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/2958689-9430112ac1bc82dd-756bb98ee2c2def8cbd55209c5ba045b.png"},93632:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20220704155816774-3b1f87eaec75897abc2ec68d8241b394-3b1f87eaec75897abc2ec68d8241b394.png"},97161:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240910184339126-29d0ae7d8aeee730da580eb2573c5494.png"}}]);