"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8592],{87525:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>d,metadata:()=>o,toc:()=>c});var t=i(85893),s=i(11151);const d={sidebar_position:10},r="QT\u9002\u914d",o={id:"T113i-Industrial/part6/QTAdaptation",title:"QT\u9002\u914d",description:"\u8fd0\u884cqt\u7a0b\u5e8f\uff0c\u9700\u8981\u5f88\u591a\u76f8\u5e94\u7684\u52a8\u6001\u5e93\uff0c\u4e0b\u9762\u8bb2\u89e3\u5982\u4f55\u5728buildroot\u5de5\u5177\u91cc\u7f16\u8bd1QT\u52a8\u6001\u5e93\uff0c\u5e76\u6210\u529f\u7f16\u8bd1\u4e00\u4e2aqtdemo\u3002",source:"@site/docs/T113i-Industrial/part6/10-QTAdaptation.md",sourceDirName:"T113i-Industrial/part6",slug:"/T113i-Industrial/part6/QTAdaptation",permalink:"/docs/T113i-Industrial/part6/QTAdaptation",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/T113i-Industrial/part6/10-QTAdaptation.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"t113iSidebar",previous:{title:"\u652f\u6301TF\u542f\u52a8",permalink:"/docs/T113i-Industrial/part6/SupportTFBoot"}},a={},c=[{value:"1.\u642d\u5efaQT\u5f00\u53d1\u73af\u5883",id:"1\u642d\u5efaqt\u5f00\u53d1\u73af\u5883",level:2},{value:"2.\u7f16\u8bd1\u53ca\u8fd0\u884cQT\u5e94\u7528\u7a0b\u5e8f",id:"2\u7f16\u8bd1\u53ca\u8fd0\u884cqt\u5e94\u7528\u7a0b\u5e8f",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"qt\u9002\u914d",children:"QT\u9002\u914d"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd0\u884cqt\u7a0b\u5e8f\uff0c\u9700\u8981\u5f88\u591a\u76f8\u5e94\u7684\u52a8\u6001\u5e93\uff0c\u4e0b\u9762\u8bb2\u89e3\u5982\u4f55\u5728buildroot\u5de5\u5177\u91cc\u7f16\u8bd1QT\u52a8\u6001\u5e93\uff0c\u5e76\u6210\u529f\u7f16\u8bd1\u4e00\u4e2aqtdemo\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"1\u642d\u5efaqt\u5f00\u53d1\u73af\u5883",children:"1.\u642d\u5efaQT\u5f00\u53d1\u73af\u5883"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728Ubuntu\u4e0a\uff0c\u8fdb\u5165SDK\u6839\u76ee\u5f55",(0,t.jsx)(n.code,{children:"t113i_tinasdk5.0-v1"}),"\uff0c"]}),"\n",(0,t.jsxs)(n.p,{children:["\u524d\u9762\u5f00\u53d1\u73af\u5883\u642d\u5efa\u7ae0\u8282\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\u5f00\u53d1\u73af\u5883\uff0c\u5148\u6267\u884c",(0,t.jsx)(n.code,{children:" source build/envsetup.sh"}),"\uff0c\u518d\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh buildroot_menuconfig  "}),"\u8fdb\u5165buildroot\u914d\u7f6e\u754c\u9762\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"Target packages"}),"\uff0c\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730103356980",src:i(14251).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"Graphic libraries and applications"}),"\uff0c\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730103449997",src:i(4635).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"QT5"}),"\uff0c\u70b9\u51fb\u952e\u76d8",(0,t.jsx)(n.code,{children:"y"}),"\uff0c\u5e76\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730103526051",src:i(55347).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u70b9\u51fb\u952e\u76d8",(0,t.jsx)(n.code,{children:"y"}),"\uff0c\u9009\u4e0a\u4ee5\u4e0b\u9009\u9879\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730103743271",src:i(43321).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730103947554",src:i(68414).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730104020154",src:i(71801).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff1a\u5148\u4e0d\u8981\u7f16\u8bd1\u4f8b\u7a0b\uff0c\u56e0\u4e3a\u76ee\u524d\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e2d\u8fd8\u6ca1\u6709\u76f8\u5e94\u7684\u5e93\u6587\u4ef6\uff0c\u7f16\u8bd1\u4f8b\u7a0b\u4f1a\u51fa\u73b0\u9519\u8bef\u3002\u8981\u628a\u4ee5\u4e0a\u7684\u5e93\u6587\u4ef6\u5148\u7f16\u8bd1\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4fdd\u5b58\u9000\u51fa\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh"}),"\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e2d\u81ea\u52a8\u4f1a\u6709\u76f8\u5bf9\u5e94\u7684\u5e93\u6587\u4ef6\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u53bb\u7f16\u8bd1qt\u5e94\u7528\u7a0b\u5e8f\u4e86\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u524d\u9762\u8bef\u64cd\u4f5c\u9009\u4e0a\u4e86\u4f8b\u7a0b\uff0c\u7f16\u8bd1\u65f6\u4f1a\u51fa\u73b0\u62a5\u9519\uff08\u5373\u4fbf\u628a\u4f8b\u7a0b\u53d6\u6d88\u518d\u7f16\u8bd1\uff09\uff0c"}),"\n",(0,t.jsxs)(n.p,{children:["\u9700\u8981\u5230",(0,t.jsx)(n.code,{children:"t113i_tinasdk5.0-v1/out/t113_i/evb1_auto/buildroot/buildroot/build"}),"\u76ee\u5f55\u4e0b\uff0c\u628a\u76f8\u5e94\u7684\u5e93\u6587\u4ef6\u548c\u4f8b\u7a0b\u6587\u4ef6\u5220\u9664\uff0c\u518d\u91cd\u65b0\u7f16\u8bd1\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"2\u7f16\u8bd1\u53ca\u8fd0\u884cqt\u5e94\u7528\u7a0b\u5e8f",children:"2.\u7f16\u8bd1\u53ca\u8fd0\u884cQT\u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u9762\u642d\u5efa\u597d\u73af\u5883\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u9009\u62e9\u7f16\u8bd1qt\u4f8b\u7a0b\u4e86\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u8fdb\u5165SDK\u6839\u76ee\u5f55",(0,t.jsx)(n.code,{children:"t113i_tinasdk5.0-v1"}),"\uff0c"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh buildroot_menuconfig"}),"\uff0c\u8fdb\u5165buildroot\u914d\u7f6e\u754c\u9762\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"Target packages"}),"\uff0c\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730105942803",src:i(13422).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:" allwinner platform private package select"}),"\uff0c\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730110022974",src:i(70893).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"qt_demo"}),"\uff0c\u8fdb\u5165\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730110052980",src:i(5574).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsxs)(n.p,{children:["\u70b9\u51fb\u952e\u76d8",(0,t.jsx)(n.code,{children:"y"}),"\uff0c\u9009\u4e0a\u4ee5\u4e0b\u9009\u9879\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730110136442",src:i(47632).Z+"",width:"1659",height:"890"})}),"\n",(0,t.jsx)(n.p,{children:"\u4fdd\u5b58\u9000\u51fa\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh"}),"\u7f16\u8bd1\u7a0b\u5e8f\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"SDK\u4e2d\u5df2\u4e3aqt-demo\u7f16\u5199\u4e86\u4e00\u4efd\u5f00\u673a\u81ea\u542f\u52a8\u7684\u811a\u672c\uff0c"}),"\n",(0,t.jsxs)(n.p,{children:["\u811a\u672c\u4fdd\u5b58\u5728",(0,t.jsx)(n.code,{children:"t113i_tinasdk5.0-v1/buildroot/config/buildroot/allwinner/system/busybox-init-base-files/etc/init.d/S70launcher"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ubuntu@dshanpi:~/meihao/t113i_tinasdk5.0-v1/buildroot/config/buildroot/allwinner/system/busybox-init-base-files/etc/init.d$ pwd\n/home/ubuntu/meihao/t113i_tinasdk5.0-v1/buildroot/config/buildroot/allwinner/system/busybox-init-base-files/etc/init.d\nubuntu@dshanpi:~/meihao/t113i_tinasdk5.0-v1/buildroot/config/buildroot/allwinner/system/busybox-init-base-files/etc/init.d$ ls\nS20mdev  S50adb_start  S50powerkey_display  S50powerkey_suspend  S60mount_udisk  S70launcher\nubuntu@dshanpi:~/meihao/t113i_tinasdk5.0-v1/buildroot/config/buildroot/allwinner/system/busybox-init-base-files/etc/init.d$\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730111009494",src:i(53296).Z+"",width:"1329",height:"104"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u8be5\u811a\u672c",(0,t.jsx)(n.code,{children:"S70launcher"}),"\u4e2d\u4fee\u6539\u6216\u8005\u914d\u7f6e\u663e\u793a\u8bbe\u5907\u8282\u70b9\u548c\u89e6\u6478\u8bbe\u5907\u8282\u70b9\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\n#\n# Start the launcher\n#\n\ncase "$1" in\n    start)\n                if [ ! -f "/usr/bin/Launcher" ];then\n                        exit 1\n                fi\n\n                if [ -d "/usr/local/Qt_5.12.5" ];then\n                        export  QTDIR=/usr/local/Qt_5.12.5\n                else\n                        export  QTDIR=/usr/lib\n                fi\n\n                if [ -d $QTDIR ];then\n\n                        export  QT_ROOT=$QTDIR\n                        export  PATH=$QTDIR/bin:$PATH\n                        export  LD_LIBRARY_PATH=$QTDIR/lib:/usr/lib/cedarx/:$LD_LIBRARY_PATH\n\n                        export QT_QPA_PLATFORM_PLUGIN_PATH=$QT_ROOT/plugins\n                        export QT_QPA_PLATFORM=linuxfb:tty=/dev/fb0\n                        export QT_QPA_FONTDIR=$QT_ROOT/fonts\n\n                        TouchDevice=fts_ts\n                        for InputDevices in /sys/class/input/input*\n                        do\n                                DeviceName=`cat $InputDevices/name`\n                                if [ "$DeviceName" == "$TouchDevice" ];then\n                                        TouchDeviceNum=${InputDevices##*input}\n                                        export QT_QPA_EVDEV_TOUCHSCREEN_PARAMETERS=/dev/input/event$TouchDeviceNum\n                                        echo "add "/dev/input/event$TouchDeviceNum "to Qt Application."\n                                        break\n                                fi\n                        done\n                        if [ ! -n "$TouchDeviceNum" ]; then\n                                echo "Error:Input device $TouchDevice can not be found,plz check it!"\n                        fi\n\n                        if [ -d "/usr/local/Qt_5.12.5" ];then\n                                export QT_QPA_PLATFORM=eglfs\n                                export QT_QPA_GENERIC_PLUGINS=evdevtouch\n                                export QT_QPA_EGLFS_INTEGRATION=eglfs_mali\n                        else\n                                export QT_QPA_FONTDIR=/usr/lib/fonts\n                                export QT_QPA_GENERIC_PLUGINS=tslib\n                                #export QT_QPA_GENERIC_PLUGINS=evdevmouse:/dev/input/event4\n                                export TSLIB_FBDEVICE=/dev/fb0\n                                export TSLIB_CONSOLEDEVICE=none\n                                export TSLIB_TSDEVICE=/dev/input/event3\n                                export TSLIB_CONFFILE=/etc/ts.conf\n                                export TSLIB_CALIBFILE=/etc/pointercal\n                                export TSLIB_PLUGINDIR=/usr/lib/ts\n                        fi\n\n                        export QWS_MOUSE_PROTO=\n                        mkdir -p /dev/shm\n                        ulimit -c unlimited\n                        Launcher &\n                fi\n        ;;\n    stop)]\n        ;;\n    *)\n        echo "Usage: $0 {start}"\n        exit 1\n        ;;\nesac\n\nexit 0\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u56de\u5230SDK\u6839\u76ee\u5f55",(0,t.jsx)(n.code,{children:"t113i_tinasdk5.0-v1"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh"}),"\u7f16\u8bd1\u7a0b\u5e8f\u3002"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a\u8981\u786e\u4fdd ",(0,t.jsx)(n.strong,{children:"t113i_tinasdk5.0-v1/out/t113_i/evb1_auto/buildroot/buildroot/build/busybox-init-base-files/etc/init.d"})," \u76ee\u5f55\u4e0b\u7684 ",(0,t.jsx)(n.strong,{children:"S70launcher"})," \u811a\u672c\u6587\u4ef6\u4e0e\u4e0a\u9762\u7684\u4fee\u6539\u7684\u76f8\u5bf9\u5e94\uff0c\u5426\u5219\u9700\u8981\u5220\u9664 ",(0,t.jsx)(n.strong,{children:"busybox-init-base-files"})," \u6587\u4ef6\uff0c\u518d\u91cd\u65b0\u7f16\u8bd1\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u6267\u884c",(0,t.jsx)(n.code,{children:"./build.sh pack"}),"\u8fdb\u884c\u6253\u5305\u3002\u70e7\u5f55\u5230\u5f00\u53d1\u677f\u4e0a\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"...\nStarting adb: [    7.930514] file system registered\nOK\ninit adb main[    7.981491] read descriptors\n\nHandling main()\n[    7.985095] read strings\nInitializing postgresql data base...\nsu: unknown user postgres\ndone\nStarting postgresql: su: unknown user postgres\nOK\n/etc/init.d/S50powerkey_display: line 12: powerkey_display: command not found\n/etc/init.d/S50powerkey_suspend: line 12: powerkey_suspend: command not found\n[    8.130511] FAT-fs (mmcblk0p8): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.\n/dev/by-name/UDISK already forma[    8.144528] sunxi_set_cur_vol_work()422 WARN: get power supply failed\nt\n[    8.187954] FAT-fs (mmcblk0p8): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.\n[    8.230945] android_work: sent uevent USB_STATE=CONNECTED\nadd /dev/input/event3 to Qt Application.\nStarting dnsmasq: [    8.324039] configfs-gadget gadget: high-speed config #1: c\n[    8.330520] android_work: sent uevent USB_STATE=CONFIGURED\n[    8.484259] urandom_read: 2 callbacks suppressed\n[    8.484270] random: dnsmasq: uninitialized urandom read (128 bytes read)\nOK\nTrying to connect to SWUpdate...\nswu_param: ####\nswu_software: ####\nswu_mode: ####\nno swupdate_cmd to run, wait for next swupdate\n# [   14.056782] random: crng init done\nQStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'\nxkbcommon: ERROR: failed to add default include path /usr/share/X11/xkb\nFailed to create xkb context\nload filemanager_zh ok;\nload qt_zh_CN ok;\nload qfile_zh ok;\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\n#\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230qt-demo\u5df2\u7ecf\u5728\u540e\u53f0\u4e2d\u8fd0\u884c\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240730112210544",src:i(67195).Z+"",width:"1058",height:"664"})}),"\n",(0,t.jsx)(n.p,{children:"\u5b8c\u6574\u7684\u754c\u9762\u5e76\u4e0d\u662f\u8fd9\u6837\uff0c\u9700\u8981\u4fee\u6539\u76f8\u5e94\u7684\u5206\u8fa8\u7387\u9002\u914dmipi\u5c4f\u5e55\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},14251:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730103356980-0ce6fa0ac40c55bc83d4f9f59e0b947c.png"},4635:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730103449997-3332b4d1295b050594d6ddbd8dd7287e.png"},55347:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730103526051-f3f5b64dbba04994565b140d542a366c.png"},43321:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730103743271-8371df6dc7e6e18d6d533238799d08c9.png"},68414:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730103947554-ae84a8be6d3ed14dc9ed71808b17c003.png"},71801:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730104020154-6d1c845adb116ba2896b6514390e69a9.png"},13422:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730105942803-0ce6fa0ac40c55bc83d4f9f59e0b947c.png"},70893:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730110022974-ee426025fc87ae13ad390df215f15d0c.png"},5574:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730110052980-953fa55cad229da77d1aedae23ff0468.png"},47632:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730110136442-9c82874cdecb6ded87ebe747974b3c34.png"},53296:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730111009494-7ff22112e3bd7083f5453c88d9fb0248.png"},67195:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/image-20240730112210544-f7e5d60cd072a4376585451d0602a8ad.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>r});var t=i(67294);const s={},d=t.createContext(s);function r(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);