"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6019],{37519:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var t=i(85893),s=i(11151);const r={sidebar_position:4},c="OpenCV + NPU \u6e90\u7801\u89e3\u6790",l={id:"TinyVision/part4/SourceCodeAnalysisOfOpenCV+NPU",title:"OpenCV + NPU \u6e90\u7801\u89e3\u6790",description:"\u5b8c\u6574\u7684\u4ee3\u7801\u5df2\u7ecf\u4e0a\u4f20Github\u5f00\u6e90\uff0c\u524d\u5f80\u4ee5\u4e0b\u5730\u5740\uff1ahttps://github.com/YuzukiHD/TinyVision/tree/main/tina/openwrt/package/thirdparty/vision/opencvcameramobilenetv2ssd/src",source:"@site/docs/TinyVision/part4/4-SourceCodeAnalysisOfOpenCV+NPU.md",sourceDirName:"TinyVision/part4",slug:"/TinyVision/part4/SourceCodeAnalysisOfOpenCV+NPU",permalink:"/docs/TinyVision/part4/SourceCodeAnalysisOfOpenCV+NPU",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/TinyVision/part4/4-SourceCodeAnalysisOfOpenCV+NPU.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"v851seSidebar",previous:{title:"NPU",permalink:"/docs/TinyVision/part4/NPU"},next:{title:"E907 \u5c0f\u6838\u5f00\u53d1",permalink:"/docs/category/e907-\u5c0f\u6838\u5f00\u53d1"}},d={},a=[{value:"Mobilenet v2 \u524d\u5904\u7406",id:"mobilenet-v2-\u524d\u5904\u7406",level:3},{value:"Mobilenet v2 \u540e\u5904\u7406",id:"mobilenet-v2-\u540e\u5904\u7406",level:3},{value:"\u83b7\u53d6\u663e\u793a\u5c4f\u7684\u53c2\u6570\u4fe1\u606f",id:"\u83b7\u53d6\u663e\u793a\u5c4f\u7684\u53c2\u6570\u4fe1\u606f",level:3},{value:"\u4fe1\u53f7\u5904\u7406\u51fd\u6570",id:"\u4fe1\u53f7\u5904\u7406\u51fd\u6570",level:3},{value:"\u4e3b\u5faa\u73af",id:"\u4e3b\u5faa\u73af",level:3},{value:"\u6548\u679c\u5c55\u793a",id:"\u6548\u679c\u5c55\u793a",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"opencv--npu-\u6e90\u7801\u89e3\u6790",children:"OpenCV + NPU \u6e90\u7801\u89e3\u6790"}),"\n",(0,t.jsxs)(e.p,{children:["\u5b8c\u6574\u7684\u4ee3\u7801\u5df2\u7ecf\u4e0a\u4f20Github\u5f00\u6e90\uff0c\u524d\u5f80\u4ee5\u4e0b\u5730\u5740\uff1a",(0,t.jsx)(e.a,{href:"https://github.com/YuzukiHD/TinyVision/tree/main/tina/openwrt/package/thirdparty/vision/opencv_camera_mobilenet_v2_ssd/src",children:"https://github.com/YuzukiHD/TinyVision/tree/main/tina/openwrt/package/thirdparty/vision/opencv_camera_mobilenet_v2_ssd/src"})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.strong,{children:["\u3010",(0,t.jsx)(e.a,{href:"#lcd-%E6%A8%A1%E7%BB%84%E9%A9%B1%E5%8A%A8",children:"\u6ce8\u610f\uff0c\u8fd0\u884c\u8fd9\u91cc\u7684DEMO\u8bf7\u5148\u79fb\u690dLCD\u9a71\u52a8\uff01\uff01 "}),"\u3011"]})}),"\n",(0,t.jsxs)(e.p,{children:["\u5426\u5219\u62a5\u9519 ",(0,t.jsx)(e.code,{children:"Unsupported depth of framebuffer"})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20240320180529300",src:i(14180).Z+"",width:"566",height:"207"})}),"\n",(0,t.jsx)(e.h3,{id:"mobilenet-v2-\u524d\u5904\u7406",children:"Mobilenet v2 \u524d\u5904\u7406"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"void get_input_data(const cv::Mat& sample, uint8_t* input_data, int input_h, int input_w, const float* mean, const float* scale){\n    cv::Mat img;\n    if (sample.channels() == 1)\n        cv::cvtColor(sample, img, cv::COLOR_GRAY2RGB);\n    else\n        cv::cvtColor(sample, img, cv::COLOR_BGR2RGB);\n    cv::resize(img, img, cv::Size(input_h, input_w));\n    uint8_t* img_data = img.data;\n    /* nhwc to nchw */\n    for (int h = 0; h < input_h; h++) {\n        for (int w = 0; w < input_w; w++) {\n            for (int c = 0; c < 3; c++) {\n                int in_index = h * input_w * 3 + w * 3 + c;\n                int out_index = c * input_h * input_w + h * input_w + w;\n                input_data[out_index] = (uint8_t)(img_data[in_index]);\t//uint8\n            }\n        }\n    }\n}\n\nuint8_t *mbv2_ssd_preprocess(const cv::Mat& sample, int input_size, int img_channel) {\n\tconst float mean[3] = {127, 127, 127};\n\tconst float scale[3] = {0.0078125, 0.0078125, 0.0078125};\n\tint img_size = input_size * input_size * img_channel;\n\tuint8_t *tensor_data = NULL;\n\ttensor_data = (uint8_t *)malloc(1 * img_size * sizeof(uint8_t));\n\tget_input_data(sample, tensor_data, input_size, input_size, mean, scale);\n    return tensor_data;\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5C++\u4ee3\u7801\u662f\u7528\u4e8e\u5bf9\u8f93\u5165\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff0c\u4ee5\u4fbf\u8f93\u5165\u5230MobileNet V2 SSD\u6a21\u578b\u4e2d\u8fdb\u884c\u76ee\u6807\u68c0\u6d4b\u3002"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"get_input_data"}),"\u51fd\u6570\uff1a"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u8be5\u51fd\u6570\u5bf9\u8f93\u5165\u7684\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u9002\u5408MobileNet V2 SSD\u6a21\u578b\u8f93\u5165\u7684\u683c\u5f0f\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u9996\u5148\uff0c\u5bf9\u8f93\u5165\u56fe\u50cf\u8fdb\u884c\u901a\u9053\u683c\u5f0f\u7684\u8f6c\u6362\uff0c\u786e\u4fdd\u56fe\u50cf\u901a\u9053\u987a\u5e8f\u7b26\u5408\u6a21\u578b\u8981\u6c42\uff08RGB\u683c\u5f0f\uff09\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u7136\u540e\uff0c\u5c06\u56fe\u50cf\u5927\u5c0f\u8c03\u6574\u4e3a\u6307\u5b9a\u7684\u8f93\u5165\u5c3a\u5bf8\uff08",(0,t.jsx)(e.code,{children:"input_h * input_w"}),"\uff09\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u6700\u540e\uff0c\u5c06\u5904\u7406\u540e\u7684\u56fe\u50cf\u6570\u636e\u6309\u7167\u7279\u5b9a\u987a\u5e8f\uff08NCHW\u683c\u5f0f\uff09\u586b\u5145\u5230",(0,t.jsx)(e.code,{children:"input_data"}),"\u6570\u7ec4\u4e2d\uff0c\u4ee5\u4fbf\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u6570\u636e\u4f7f\u7528\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"mbv2_ssd_preprocess"}),"\u51fd\u6570\uff1a"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u8be5\u51fd\u6570\u662f\u5bf9\u8f93\u5165\u56fe\u50cf\u8fdb\u884c MobileNet V2 SSD \u6a21\u578b\u7684\u9884\u5904\u7406\uff0c\u5e76\u8fd4\u56de\u5904\u7406\u540e\u7684\u6570\u636e\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u51fd\u6570\u5185\u90e8\uff0c\u9996\u5148\u5b9a\u4e49\u4e86\u56fe\u50cf\u5404\u901a\u9053\u7684\u5747\u503c\uff08mean\uff09\u548c\u7f29\u653e\u6bd4\u4f8b\uff08scale\uff09\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u7136\u540e\u8ba1\u7b97\u4e86\u8f93\u5165\u56fe\u50cf\u7684\u603b\u5927\u5c0f\uff0c\u5e76\u5206\u914d\u4e86\u76f8\u5e94\u5927\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\u7528\u4e8e\u5b58\u50a8\u9884\u5904\u7406\u540e\u7684\u6570\u636e\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u8c03\u7528\u4e86",(0,t.jsx)(e.code,{children:"get_input_data"}),"\u51fd\u6570\u5bf9\u8f93\u5165\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff0c\u5c06\u5904\u7406\u540e\u7684\u6570\u636e\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"tensor_data"}),"\u4e2d\uff0c\u5e76\u6700\u7ec8\u8fd4\u56de\u8be5\u6570\u636e\u6307\u9488\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u6bb5\u4ee3\u7801\u7684\u529f\u80fd\u662f\u5c06\u8f93\u5165\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff0c\u4ee5\u9002\u5e94MobileNet V2 SSD\u6a21\u578b\u7684\u8f93\u5165\u8981\u6c42\uff0c\u5e76\u8fd4\u56de\u9884\u5904\u7406\u540e\u7684\u6570\u636e\u4f9b\u6a21\u578b\u4f7f\u7528\u3002\u540c\u65f6\u9700\u8981\u6ce8\u610f\uff0c\u5728\u4f7f\u7528\u5b8c",(0,t.jsx)(e.code,{children:"tensor_data"}),"\u540e\uff0c\u9700\u8981\u5728\u9002\u5f53\u7684\u65f6\u5019\u91ca\u653e\u76f8\u5e94\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4ee5\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"mobilenet-v2-\u540e\u5904\u7406",children:"Mobilenet v2 \u540e\u5904\u7406"}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5206\u4e3a\u6765\u8bb2:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"// \u6bd4\u8f83\u51fd\u6570\uff0c\u7528\u4e8e\u6309\u7167\u5206\u6570\u5bf9Bbox_t\u5bf9\u8c61\u8fdb\u884c\u6392\u5e8f\nbool comp(const Bbox_t &a, const Bbox_t &b) {\n    return a.score > b.score;\n}\n\n// \u8ba1\u7b97\u4e24\u4e2a\u6846\u4e4b\u95f4\u7684\u4ea4\u96c6\u9762\u79ef\nstatic inline float intersection_area(const Bbox_t& a, const Bbox_t& b) {\n    // \u5c06\u6846\u8868\u793a\u4e3acv::Rect_<float>\u5bf9\u8c61\n    cv::Rect_<float> rect_a(a.xmin, a.ymin, a.xmax-a.xmin, a.ymax-a.ymin);\n    cv::Rect_<float> rect_b(b.xmin, b.ymin, b.xmax-b.xmin, b.ymax-b.ymin);\n    \n    // \u8ba1\u7b97\u4e24\u4e2a\u77e9\u5f62\u7684\u4ea4\u96c6\n    cv::Rect_<float> inter = rect_a & rect_b;\n    \n    // \u8fd4\u56de\u4ea4\u96c6\u7684\u9762\u79ef\n    return inter.area();\n}\n\n// \u975e\u6781\u5927\u503c\u6291\u5236\u7b97\u6cd5\uff08NMS\uff09\nstatic void nms_sorted_bboxes(const std::vector<Bbox_t>& bboxs, std::vector<int>& picked, float nms_threshold) {\n    picked.clear();\n    const int n = bboxs.size();\n    \n    // \u521b\u5efa\u5b58\u50a8\u6bcf\u4e2a\u6846\u9762\u79ef\u7684\u5411\u91cf\n    std::vector<float> areas(n);\n    \n    // \u8ba1\u7b97\u6bcf\u4e2a\u6846\u7684\u9762\u79ef\u5e76\u5b58\u50a8\n    for (int i = 0; i < n; i++){\n        areas[i] = (bboxs[i].xmax - bboxs[i].xmin) * (bboxs[i].ymax - bboxs[i].ymin);\n    }\n    \n    // \u5bf9\u6bcf\u4e2a\u6846\u8fdb\u884c\u904d\u5386\n    for (int i = 0; i < n; i++) {\n        const Bbox_t& a = bboxs[i];\n        int keep = 1;\n        \n        // \u5bf9\u5df2\u7ecf\u9009\u62e9\u7684\u6846\u8fdb\u884c\u904d\u5386\n        for (int j = 0; j < (int)picked.size(); j++) {\n            const Bbox_t& b = bboxs[picked[j]];\n            \n            // \u8ba1\u7b97\u4ea4\u96c6\u548c\u5e76\u96c6\u9762\u79ef\n            float inter_area = intersection_area(a, b);\n            float union_area = areas[i] + areas[picked[j]] - inter_area;\n            \n            // \u8ba1\u7b97\u4ea4\u5e76\u6bd4\n            if (inter_area / union_area > nms_threshold)\n                keep = 0; // \u5982\u679c\u4ea4\u5e76\u6bd4\u5927\u4e8e\u9608\u503c\uff0c\u5219\u4e0d\u9009\u62e9\u8be5\u6846\n        }\n        \n        // \u5982\u679c\u7b26\u5408\u6761\u4ef6\u5219\u9009\u62e9\u8be5\u6846\uff0c\u52a0\u5165\u5230\u7ed3\u679c\u5411\u91cf\u4e2d\n        if (keep)\n            picked.push_back(i);\n    }\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u8fd9\u6bb5\u4ee3\u7801\u5b9e\u73b0\u4e86\u76ee\u6807\u68c0\u6d4b\u4e2d\u5e38\u7528\u7684\u975e\u6781\u5927\u503c\u6291\u5236\u7b97\u6cd5\uff08NMS\uff09\u3002",(0,t.jsx)(e.code,{children:"comp"}),"\u51fd\u6570\u7528\u4e8e\u5bf9",(0,t.jsx)(e.code,{children:"Bbox_t"}),"\u5bf9\u8c61\u6309\u7167\u5206\u6570\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\u3002",(0,t.jsx)(e.code,{children:"intersection_area"}),"\u51fd\u6570\u7528\u4e8e\u8ba1\u7b97\u4e24\u4e2a\u6846\u4e4b\u95f4\u7684\u4ea4\u96c6\u9762\u79ef\u3002",(0,t.jsx)(e.code,{children:"nms_sorted_bboxes"}),"\u51fd\u6570\u662fNMS\u7b97\u6cd5\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u5df2\u7ecf\u6309\u7167\u5206\u6570\u6392\u5e8f\u7684\u6846\u7684\u5411\u91cf",(0,t.jsx)(e.code,{children:"bboxs"}),"\uff0c\u4ee5\u53ca\u4e00\u4e2a\u7a7a\u7684\u6574\u6570\u5411\u91cf",(0,t.jsx)(e.code,{children:"picked"}),"\uff0c\u7528\u4e8e\u5b58\u50a8\u4fdd\u7559\u4e0b\u6765\u7684\u6846\u7684\u7d22\u5f15\u3002",(0,t.jsx)(e.code,{children:"nms_threshold"}),"\u662f\u4e00\u4e2a\u9608\u503c\uff0c\u7528\u4e8e\u63a7\u5236\u91cd\u53e0\u5ea6\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u7b97\u6cd5\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\u6e05\u7a7a\u5b58\u50a8\u7ed3\u679c\u7684",(0,t.jsx)(e.code,{children:"picked"}),"\u5411\u91cf\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u83b7\u53d6\u6846\u7684\u4e2a\u6570",(0,t.jsx)(e.code,{children:"n"}),"\uff0c\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u5b58\u50a8\u6bcf\u4e2a\u6846\u9762\u79ef\u7684\u5411\u91cf",(0,t.jsx)(e.code,{children:"areas"}),"\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u904d\u5386\u6bcf\u4e2a\u6846\uff0c\u8ba1\u7b97\u5176\u9762\u79ef\u5e76\u5b58\u50a8\u5230",(0,t.jsx)(e.code,{children:"areas"}),"\u5411\u91cf\u4e2d\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5bf9\u6bcf\u4e2a\u6846\u8fdb\u884c\u904d\u5386\uff0c\u901a\u8fc7\u8ba1\u7b97\u4ea4\u5e76\u6bd4\u6765\u5224\u65ad\u662f\u5426\u9009\u62e9\u8be5\u6846\u3002\u5982\u679c\u4ea4\u5e76\u6bd4\u5927\u4e8e\u9608\u503c\uff0c\u5219\u4e0d\u9009\u62e9\u8be5\u6846\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u5982\u679c\u7b26\u5408\u6761\u4ef6\uff0c\u5219\u9009\u62e9\u8be5\u6846\uff0c\u5c06\u5176\u7d22\u5f15\u52a0\u5165\u5230",(0,t.jsx)(e.code,{children:"picked"}),"\u5411\u91cf\u4e2d\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u5b8c\u6210\u975e\u6781\u5927\u503c\u6291\u5236\u7b97\u6cd5\uff0c",(0,t.jsx)(e.code,{children:"picked"}),"\u5411\u91cf\u4e2d\u5b58\u50a8\u4e86\u4fdd\u7559\u4e0b\u6765\u7684\u6846\u7684\u7d22\u5f15\u3002"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u4e2a\u7b97\u6cd5\u7684\u4f5c\u7528\u662f\u53bb\u9664\u9ad8\u5ea6\u91cd\u53e0\u7684\u6846\uff0c\u53ea\u4fdd\u7559\u5f97\u5206\u6700\u9ad8\u7684\u90a3\u4e2a\u6846\uff0c\u4ee5\u51cf\u5c11\u5197\u4f59\u68c0\u6d4b\u7ed3\u679c\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:'cv::Mat detect_ssd(const cv::Mat& bgr, float **output) {\n    // \u5b9a\u4e49\u9608\u503c\u548c\u5e38\u6570\n    float iou_threshold = 0.45;\n    float conf_threshold = 0.5;\n    const int inputH = 300;\n    const int inputW = 300;\n    const int outputClsSize = 21;\n#if MBV2_SSD\n    int output_dim_1 = 3000;\n#else\n    int output_dim_1 = 8732;\n#endif\n\n    // \u8ba1\u7b97\u8f93\u51fa\u6570\u636e\u7684\u5927\u5c0f\n    int size0 = 1 * output_dim_1 * outputClsSize;\n    int size1 = 1 * output_dim_1 * 4;\n\n    // \u5c06\u8f93\u51fa\u6570\u636e\u8f6c\u6362\u4e3a\u5411\u91cf\n    std::vector<float> scores_data(output[0], &output[0][size0-1]);\n    std::vector<float> boxes_data(output[1], &output[1][size1-1]);\n\n    // \u83b7\u53d6\u5206\u6570\u548c\u8fb9\u754c\u6846\u7684\u6307\u9488\n    const float* scores = scores_data.data();\n    const float* bboxes = boxes_data.data();\n\n    // \u8ba1\u7b97\u7f29\u653e\u6bd4\u4f8b\n    float scale_w = bgr.cols / (float)inputW;\n    float scale_h = bgr.rows / (float)inputH;\n    bool pass = true;\n\n    // \u521b\u5efa\u5b58\u50a8\u68c0\u6d4b\u7ed3\u679c\u7684\u5411\u91cf\n    std::vector<Bbox_t> BBox;\n\n    // \u904d\u5386\u6bcf\u4e2a\u6846\n    for(int i = 0; i < output_dim_1; i++) {\n        std::vector<float> conf;\n        // \u83b7\u53d6\u6bcf\u4e2a\u6846\u7684\u7f6e\u4fe1\u5ea6\n        for(int j = 0; j < outputClsSize; j++) {\n            conf.emplace_back(scores[i * outputClsSize + j]);\n        }\n        // \u627e\u5230\u7f6e\u4fe1\u5ea6\u6700\u5927\u7684\u7c7b\u522b\n        int max_index = std::max_element(conf.begin(), conf.end()) - conf.begin();\n        // \u5982\u679c\u7c7b\u522b\u4e0d\u662f\u80cc\u666f\u7c7b\uff0c\u5e76\u4e14\u7f6e\u4fe1\u5ea6\u5927\u4e8e\u9608\u503c\uff0c\u5219\u9009\u4e2d\u8be5\u6846\n        if (max_index != 0) {\n            if(conf[max_index] < conf_threshold)\n                continue;\n            Bbox_t b;\n            // \u6839\u636e\u7f29\u653e\u6bd4\u4f8b\u8ba1\u7b97\u6846\u7684\u5750\u6807\u548c\u5c3a\u5bf8\n            int left = bboxes[i * 4] * scale_w * 300;\n            int top = bboxes[i * 4 + 1] * scale_h * 300;\n            int right = bboxes[ i * 4 + 2] * scale_w * 300;\n            int bottom = bboxes[i * 4 + 3] * scale_h * 300;\n            // \u786e\u4fdd\u5750\u6807\u4e0d\u8d85\u51fa\u56fe\u50cf\u8303\u56f4\n            b.xmin = std::max(0, left);\n            b.ymin = std::max(0, top);\n            b.xmax = right;\n            b.ymax = bottom;\n            b.score = conf[max_index];\n            b.cls_idx = max_index;\n            BBox.emplace_back(b);\n        }\n        conf.clear();\n    }\n\n    // \u6309\u7167\u5206\u6570\u5bf9\u6846\u8fdb\u884c\u6392\u5e8f\n    std::sort(BBox.begin(), BBox.end(), comp);\n\n    // \u5e94\u7528\u975e\u6781\u5927\u503c\u6291\u5236\u7b97\u6cd5\uff0c\u83b7\u53d6\u4fdd\u7559\u7684\u6846\u7684\u7d22\u5f15\n    std::vector<int> keep_index;\n    nms_sorted_bboxes(BBox, keep_index, iou_threshold);\n\n    // \u521b\u5efa\u5b58\u50a8\u6846\u4f4d\u7f6e\u7684\u5411\u91cf\n    std::vector<cv::Rect> bbox_per_frame;\n\n    // \u904d\u5386\u4fdd\u7559\u7684\u6846\uff0c\u7ed8\u5236\u6846\u548c\u6807\u7b7e\n    for(int i = 0; i < keep_index.size(); i++) {\n        int left = BBox[keep_index[i]].xmin;\n        int top = BBox[keep_index[i]].ymin;\n        int right = BBox[keep_index[i]].xmax;\n        int bottom = BBox[keep_index[i]].ymax;\n        int width = right - left;\n        int height = bottom - top;\n        int center_x = left + width / 2;\n        cv::rectangle(bgr, cv::Point(left, top), cv::Point(right, bottom), cv::Scalar(0, 0, 255), 1);\n        char text[256];\n        sprintf(text, "%s %.1f%%", class_names[BBox[keep_index[i]].cls_idx], BBox[keep_index[i]].score * 100);\n        cv::putText(bgr, text, cv::Point(left, top), cv::FONT_HERSHEY_COMPLEX, 1, cv::Scalar(0, 255, 255), 1, 8, 0);\n        bbox_per_frame.emplace_back(left, top, width, height);\n    }\n\n    // \u8fd4\u56de\u7ed8\u5236\u4e86\u6846\u548c\u6807\u7b7e\u7684\u56fe\u50cf\n    return bgr;\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u6a21\u578b\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u5c06\u8f93\u51fa\u6570\u636e\u8f6c\u6362\u4e3a\u5411\u91cf\uff0c\u5e76\u8ba1\u7b97\u7f29\u653e\u6bd4\u4f8b\uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u5411\u91cf\u6765\u5b58\u50a8\u68c0\u6d4b\u7ed3\u679c\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\u5b9a\u4e49\u4e86\u4e00\u4e9b\u9608\u503c\u548c\u5e38\u6570\uff0c\u5305\u62ecIOU\u9608\u503c\uff08",(0,t.jsx)(e.code,{children:"iou_threshold"}),"\uff09\u3001\u7f6e\u4fe1\u5ea6\u9608\u503c\uff08",(0,t.jsx)(e.code,{children:"conf_threshold"}),"\uff09\u3001\u8f93\u5165\u56fe\u50cf\u7684\u9ad8\u5ea6\u548c\u5bbd\u5ea6\uff08",(0,t.jsx)(e.code,{children:"inputH"}),"\u548c",(0,t.jsx)(e.code,{children:"inputW"}),"\uff09\u3001\u8f93\u51fa\u7c7b\u522b\u6570\u91cf\uff08",(0,t.jsx)(e.code,{children:"outputClsSize"}),"\uff09\u3001\u8f93\u51fa\u7ef4\u5ea6\uff08",(0,t.jsx)(e.code,{children:"output_dim_1"}),"\uff09\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u8ba1\u7b97\u8f93\u51fa\u6570\u636e\u7684\u5927\u5c0f\uff0c\u5206\u522b\u4e3a\u7c7b\u522b\u5f97\u5206\u6570\u636e\u7684\u5927\u5c0f\uff08",(0,t.jsx)(e.code,{children:"size0"}),"\uff09\u548c\u8fb9\u754c\u6846\u6570\u636e\u7684\u5927\u5c0f\uff08",(0,t.jsx)(e.code,{children:"size1"}),"\uff09\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u5c06\u8f93\u51fa\u6570\u636e\u8f6c\u6362\u4e3a\u5411\u91cf\uff0c\u5206\u522b\u4e3a\u7c7b\u522b\u5f97\u5206\u6570\u636e\u5411\u91cf\uff08",(0,t.jsx)(e.code,{children:"scores_data"}),"\uff09\u548c\u8fb9\u754c\u6846\u6570\u636e\u5411\u91cf\uff08",(0,t.jsx)(e.code,{children:"boxes_data"}),"\uff09\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u83b7\u53d6\u7c7b\u522b\u5f97\u5206\u548c\u8fb9\u754c\u6846\u7684\u6307\u9488\uff0c\u5206\u522b\u4e3a",(0,t.jsx)(e.code,{children:"scores"}),"\u548c",(0,t.jsx)(e.code,{children:"bboxes"}),"\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u8ba1\u7b97\u56fe\u50cf\u7684\u7f29\u653e\u6bd4\u4f8b\uff0c\u6839\u636e\u8f93\u5165\u56fe\u50cf\u7684\u5c3a\u5bf8\u548c\u6a21\u578b\u8f93\u5165\u5c3a\u5bf8\u4e4b\u95f4\u7684\u6bd4\u4f8b\u8ba1\u7b97\u5f97\u5230\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u521b\u5efa\u4e00\u4e2a\u5411\u91cf",(0,t.jsx)(e.code,{children:"BBox"}),"\uff0c\u7528\u4e8e\u5b58\u50a8\u68c0\u6d4b\u7ed3\u679c\u3002\u8be5\u5411\u91cf\u7684\u7c7b\u578b\u4e3a",(0,t.jsx)(e.code,{children:"Bbox_t"})]}),"\n",(0,t.jsxs)(e.li,{children:["\u904d\u5386\u6bcf\u4e00\u4e2a\u6846\uff08\u5171\u6709",(0,t.jsx)(e.code,{children:"output_dim_1"}),"\u4e2a\u6846\uff09\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u83b7\u53d6\u6bcf\u4e00\u4e2a\u6846\u7684\u5404\u4e2a\u7c7b\u522b\u7684\u7f6e\u4fe1\u5ea6\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"conf"}),"\u5411\u91cf\u4e2d\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u627e\u5230\u7f6e\u4fe1\u5ea6\u6700\u5927\u7684\u7c7b\u522b\uff0c\u5e76\u8bb0\u5f55\u5176\u4e0b\u6807",(0,t.jsx)(e.code,{children:"max_index"}),"\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u6700\u5927\u7f6e\u4fe1\u5ea6\u7684\u7c7b\u522b\u4e0d\u662f\u80cc\u666f\u7c7b\uff0c\u5e76\u4e14\u7f6e\u4fe1\u5ea6\u5927\u4e8e\u8bbe\u5b9a\u7684\u9608\u503c\uff0c\u5219\u9009\u4e2d\u8be5\u6846\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u6839\u636e\u7f29\u653e\u6bd4\u4f8b\u8ba1\u7b97\u6846\u7684\u5750\u6807\u548c\u5c3a\u5bf8\uff0c\u5176\u4e2d",(0,t.jsx)(e.code,{children:"left"}),"\u3001",(0,t.jsx)(e.code,{children:"top"}),"\u3001",(0,t.jsx)(e.code,{children:"right"}),"\u548c",(0,t.jsx)(e.code,{children:"bottom"}),"\u5206\u522b\u8868\u793a\u6846\u7684\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u5750\u6807\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u786e\u4fdd\u6846\u7684\u5750\u6807\u4e0d\u8d85\u51fa\u56fe\u50cf\u8303\u56f4\uff0c\u5e76\u5c06\u76ee\u6807\u6846\u7684\u4fe1\u606f\uff08\u5305\u62ec\u4f4d\u7f6e\u3001\u7f6e\u4fe1\u5ea6\u3001\u7c7b\u522b\u7b49\uff09\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"Bbox_t"}),"\u7c7b\u578b\u7684\u53d8\u91cf",(0,t.jsx)(e.code,{children:"b"}),"\u4e2d\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u5c06",(0,t.jsx)(e.code,{children:"b"}),"\u52a0\u5165\u5230",(0,t.jsx)(e.code,{children:"BBox"}),"\u5411\u91cf\u4e2d\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u6e05\u7a7a",(0,t.jsx)(e.code,{children:"conf"}),"\u5411\u91cf\uff0c\u4e3a\u4e0b\u4e00\u4e2a\u6846\u7684\u68c0\u6d4b\u505a\u51c6\u5907\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5bf9\u6240\u6709\u68c0\u6d4b\u5230\u7684\u76ee\u6807\u6846\u6309\u7167\u7f6e\u4fe1\u5ea6\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff1b"}),"\n",(0,t.jsxs)(e.li,{children:["\u5e94\u7528\u975e\u6781\u5927\u503c\u6291\u5236\u7b97\u6cd5\uff0c\u7b5b\u9009\u51fa\u91cd\u53e0\u5ea6\u8f83\u5c0f\u7684\u76ee\u6807\u6846\uff0c\u5e76\u5c06\u4fdd\u7559\u7684\u76ee\u6807\u6846\u7684\u7d22\u5f15\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"keep_index"}),"\u5411\u91cf\u4e2d\uff1b"]}),"\n",(0,t.jsx)(e.li,{children:"\u904d\u5386\u4fdd\u7559\u7684\u76ee\u6807\u6846\uff0c\u5bf9\u6bcf\u4e2a\u76ee\u6807\u6846\u8fdb\u884c\u7ed8\u5236\u548c\u6807\u6ce8\uff1b"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u56fe\u50cf\u4e0a\u7528\u77e9\u5f62\u6846\u6807\u51fa\u76ee\u6807\u6846\u7684\u4f4d\u7f6e\u548c\u5927\u5c0f\uff0c\u5e76\u5728\u77e9\u5f62\u6846\u5185\u6dfb\u52a0\u76ee\u6807\u7c7b\u522b\u548c\u7f6e\u4fe1\u5ea6\uff1b"}),"\n",(0,t.jsxs)(e.li,{children:["\u5c06\u7ed8\u5236\u597d\u7684\u76ee\u6807\u6846\u4fe1\u606f\uff08\u5305\u62ec\u5de6\u4e0a\u89d2\u5750\u6807\u3001\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff09\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"bbox_per_frame"}),"\u5411\u91cf\u4e2d\uff1b"]}),"\n",(0,t.jsx)(e.li,{children:"\u8fd4\u56de\u7ed8\u5236\u597d\u7684\u56fe\u50cf\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u4ee3\u7801\u4f7f\u7528\u4e86OpenCV\u5e93\u4e2d\u63d0\u4f9b\u7684\u7ed8\u5236\u77e9\u5f62\u6846\u548c\u6dfb\u52a0\u6587\u5b57\u7684\u76f8\u5173\u51fd\u6570\u3002\u5176\u4e2d",(0,t.jsx)(e.code,{children:"cv::rectangle()"}),"\u51fd\u6570\u7528\u4e8e\u7ed8\u5236\u77e9\u5f62\u6846\uff0c",(0,t.jsx)(e.code,{children:"cv::putText()"}),"\u51fd\u6570\u7528\u4e8e\u5728\u77e9\u5f62\u6846\u5185\u6dfb\u52a0\u76ee\u6807\u7c7b\u522b\u548c\u7f6e\u4fe1\u5ea6\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"\u83b7\u53d6\u663e\u793a\u5c4f\u7684\u53c2\u6570\u4fe1\u606f",children:"\u83b7\u53d6\u663e\u793a\u5c4f\u7684\u53c2\u6570\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"// \u5e27\u7f13\u51b2\u5668\u4fe1\u606f\u7ed3\u6784\u4f53\uff0c\u5305\u62ec\u6bcf\u4e2a\u50cf\u7d20\u7684\u4f4d\u6570\u548c\u865a\u62df\u5206\u8fa8\u7387\nstruct framebuffer_info {\n    uint32_t bits_per_pixel;\n    uint32_t xres_virtual;\n};\n\n// \u83b7\u53d6\u5e27\u7f13\u51b2\u5668\u7684\u4fe1\u606f\u51fd\u6570\uff0c\u63a5\u53d7\u8bbe\u5907\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570\nstruct framebuffer_info get_framebuffer_info(const char* framebuffer_device_path)\n{\n    struct framebuffer_info info;\n    struct fb_var_screeninfo screen_info;\n    int fd = -1;\n\n    // \u6253\u5f00\u8bbe\u5907\u6587\u4ef6\n    fd = open(framebuffer_device_path, O_RDWR);\n\n    // \u5982\u679c\u6210\u529f\u6253\u5f00\u8bbe\u5907\u6587\u4ef6\uff0c\u5219\u4f7f\u7528 ioctl \u51fd\u6570\u83b7\u53d6\u5c4f\u5e55\u4fe1\u606f\n    if (fd >= 0) {\n        if (!ioctl(fd, FBIOGET_VSCREENINFO, &screen_info)) {\n            info.xres_virtual = screen_info.xres_virtual;   // \u865a\u62df\u5206\u8fa8\u7387\n            info.bits_per_pixel = screen_info.bits_per_pixel;   // \u50cf\u7d20\u4f4d\u6570\n        }\n    }\n\n    return info;\n};\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u7684\u7528\u9014\u662f\u83b7\u53d6\u5e27\u7f13\u51b2\u5668\u7684\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u5177\u4f53\u6765\u8bf4\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"framebuffer_info"})," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u7528\u4e8e\u5b58\u50a8\u5e27\u7f13\u51b2\u5668\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6bcf\u4e2a\u50cf\u7d20\u7684\u4f4d\u6570\u548c\u865a\u62df\u5206\u8fa8\u7387\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"get_framebuffer_info"})," \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u83b7\u53d6\u5e27\u7f13\u51b2\u5668\u7684\u4fe1\u606f\u3002\u5b83\u63a5\u53d7\u5e27\u7f13\u51b2\u5668\u8bbe\u5907\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570\uff0c\u6253\u5f00\u8bbe\u5907\u6587\u4ef6\u5e76\u4f7f\u7528 ioctl \u51fd\u6570\u83b7\u53d6\u5c4f\u5e55\u4fe1\u606f\uff0c\u7136\u540e\u5c06\u4fe1\u606f\u5b58\u50a8\u5728 ",(0,t.jsx)(e.code,{children:"framebuffer_info"})," \u7ed3\u6784\u4f53\u4e2d\u5e76\u8fd4\u56de\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u4fe1\u53f7\u5904\u7406\u51fd\u6570",children:"\u4fe1\u53f7\u5904\u7406\u51fd\u6570"}),"\n",(0,t.jsxs)(e.p,{children:["\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u7528\u4e8e ",(0,t.jsx)(e.code,{children:"ctrl-c"})," \u4e4b\u540e\u5173\u95ed\u6444\u50cf\u5934\uff0c\u9632\u6b62\u4e0b\u4e00\u6b21\u4f7f\u7528\u6444\u50cf\u5934\u51fa\u73b0\u6444\u50cf\u5934\u4ecd\u88ab\u5360\u7528\u7684\u60c5\u51b5\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c++",children:'/* Signal handler */\nstatic void terminate(int sig_no)\n{\n    printf("Got signal %d, exiting ...\\n", sig_no);\n    cap.release();\n    exit(1);\n}\n\nstatic void install_sig_handler(void)\n{\n    signal(SIGBUS, terminate); // \u5f53\u7a0b\u5e8f\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5408\u6cd5\u7684\u5185\u5b58\u5730\u5740\u65f6\u53d1\u9001\u7684\u4fe1\u53f7\n    signal(SIGFPE, terminate); // \u6d6e\u70b9\u5f02\u5e38\u4fe1\u53f7\n    signal(SIGHUP, terminate); // \u7ec8\u7aef\u65ad\u5f00\u8fde\u63a5\u4fe1\u53f7\n    signal(SIGILL, terminate); // \u975e\u6cd5\u6307\u4ee4\u4fe1\u53f7\n    signal(SIGINT, terminate); // \u4e2d\u65ad\u8fdb\u7a0b\u4fe1\u53f7\n    signal(SIGIOT, terminate); // IOT \u9677\u9631\u4fe1\u53f7\n    signal(SIGPIPE, terminate); // \u7ba1\u9053\u7834\u88c2\u4fe1\u53f7\n    signal(SIGQUIT, terminate); // \u505c\u6b62\u8fdb\u7a0b\u4fe1\u53f7\n    signal(SIGSEGV, terminate); // \u65e0\u6548\u7684\u5185\u5b58\u5f15\u7528\u4fe1\u53f7\n    signal(SIGSYS, terminate); // \u975e\u6cd5\u7cfb\u7edf\u8c03\u7528\u4fe1\u53f7\n    signal(SIGTERM, terminate); // \u7ec8\u6b62\u8fdb\u7a0b\u4fe1\u53f7\n    signal(SIGTRAP, terminate); // \u8ddf\u8e2a/\u65ad\u70b9\u9677\u9631\u4fe1\u53f7\n    signal(SIGUSR1, terminate); // \u7528\u6237\u5b9a\u4e49\u4fe1\u53f71\n    signal(SIGUSR2, terminate); // \u7528\u6237\u5b9a\u4e49\u4fe1\u53f72\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e24\u4e2a\u51fd\u6570\uff0c\u5e76\u7ed9\u51fa\u4e86\u76f8\u5e94\u7684\u6ce8\u91ca\u8bf4\u660e\u3002\u5177\u4f53\u6ce8\u91ca\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"static void terminate(int sig_no)"}),"\uff1a\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"int sig_no"}),"\uff1a\u63a5\u6536\u5230\u7684\u4fe1\u53f7\u7f16\u53f7\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:'printf("Got signal %d, exiting ...\\n", sig_no);'}),"\uff1a\u6253\u5370\u63a5\u6536\u5230\u7684\u4fe1\u53f7\u7f16\u53f7\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"cap.release();"}),"\uff1a\u91ca\u653e\u89c6\u9891\u6d41\u6355\u83b7\u5bf9\u8c61\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"exit(1);"}),"\uff1a\u9000\u51fa\u7a0b\u5e8f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"static void install_sig_handler(void)"}),"\uff1a\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGBUS, terminate);"}),"\uff1a\u4e3aSIGBUS\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGFPE, terminate);"}),"\uff1a\u4e3aSIGFPE\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGHUP, terminate);"}),"\uff1a\u4e3aSIGHUP\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGILL, terminate);"}),"\uff1a\u4e3aSIGILL\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGINT, terminate);"}),"\uff1a\u4e3aSIGINT\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGIOT, terminate);"}),"\uff1a\u4e3aSIGIOT\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGPIPE, terminate);"}),"\uff1a\u4e3aSIGPIPE\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGQUIT, terminate);"}),"\uff1a\u4e3aSIGQUIT\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGSEGV, terminate);"}),"\uff1a\u4e3aSIGSEGV\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGSYS, terminate);"}),"\uff1a\u4e3aSIGSYS\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGTERM, terminate);"}),"\uff1a\u4e3aSIGTERM\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGTRAP, terminate);"}),"\uff1a\u4e3aSIGTRAP\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGUSR1, terminate);"}),"\uff1a\u4e3aSIGUSR1\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"signal(SIGUSR2, terminate);"}),"\uff1a\u4e3aSIGUSR2\u4fe1\u53f7\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u8fd9\u6bb5\u4ee3\u7801\u7684\u529f\u80fd\u662f\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u7528\u4e8e\u6355\u83b7\u548c\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u4fe1\u53f7\u3002\u5f53\u7a0b\u5e8f\u63a5\u6536\u5230\u6307\u5b9a\u7684\u4fe1\u53f7\u65f6\uff0c\u4f1a\u8c03\u7528",(0,t.jsx)(e.code,{children:"terminate"}),"\u51fd\u6570\u8fdb\u884c\u5904\u7406\u3002"]}),"\n",(0,t.jsxs)(e.p,{children:["\u5177\u4f53\u800c\u8a00\uff0c",(0,t.jsx)(e.code,{children:"terminate"}),"\u51fd\u6570\u4f1a\u6253\u5370\u63a5\u6536\u5230\u7684\u4fe1\u53f7\u7f16\u53f7\uff0c\u5e76\u91ca\u653e\u89c6\u9891\u6d41\u6355\u83b7\u5bf9\u8c61",(0,t.jsx)(e.code,{children:"cap"}),"\uff0c\u7136\u540e\u8c03\u7528",(0,t.jsx)(e.code,{children:"exit(1)"}),"\u9000\u51fa\u7a0b\u5e8f\u3002"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"install_sig_handler"}),"\u51fd\u6570\u7528\u4e8e\u4e3a\u591a\u4e2a\u4fe1\u53f7\u6ce8\u518c\u540c\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u51fd\u6570",(0,t.jsx)(e.code,{children:"terminate"}),"\uff0c\u4f7f\u5f97\u5f53\u8fd9\u4e9b\u4fe1\u53f7\u89e6\u53d1\u65f6\uff0c\u90fd\u4f1a\u6267\u884c\u76f8\u540c\u7684\u5904\u7406\u903b\u8f91\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"\u4e3b\u5faa\u73af",children:"\u4e3b\u5faa\u73af"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:'int main(int argc, char *argv[])\n{\n    const int frame_width = 480; // \u89c6\u9891\u5e27\u5bbd\u5ea6\n    const int frame_height = 480; // \u89c6\u9891\u5e27\u9ad8\u5ea6\n    const int frame_rate = 30; // \u89c6\u9891\u5e27\u7387\n\n    char* nbg = "/usr/lib/model/mobilenet_v2_ssd.nb"; // \u6a21\u578b\u6587\u4ef6\u8def\u5f84\n\n    install_sig_handler(); // \u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\n\n    framebuffer_info fb_info = get_framebuffer_info("/dev/fb0"); // \u83b7\u53d6\u5e27\u7f13\u51b2\u533a\u4fe1\u606f\n\n    cap.open(0); // \u6253\u5f00\u89c6\u9891\u8bbe\u5907\n\n    if (!cap.isOpened()) {\n        std::cerr << "Could not open video device." << std::endl; // \u5982\u679c\u6253\u5f00\u89c6\u9891\u8bbe\u5907\u5931\u8d25\uff0c\u5219\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u5e76\u8fd4\u56de\n        return 1;\n    }\n\n    std::cout << "Successfully opened video device." << std::endl; // \u6210\u529f\u6253\u5f00\u89c6\u9891\u8bbe\u5907\uff0c\u8f93\u51fa\u6210\u529f\u4fe1\u606f\n    cap.set(cv::CAP_PROP_FRAME_WIDTH, frame_width); // \u8bbe\u7f6e\u89c6\u9891\u5e27\u5bbd\u5ea6\n    cap.set(cv::CAP_PROP_FRAME_HEIGHT, frame_height); // \u8bbe\u7f6e\u89c6\u9891\u5e27\u9ad8\u5ea6\n    cap.set(cv::CAP_PROP_FPS, frame_rate); // \u8bbe\u7f6e\u89c6\u9891\u5e27\u7387\n    std::ofstream ofs("/dev/fb0"); // \u6253\u5f00\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\n    cv::Mat frame; // \u521b\u5efa\u7528\u4e8e\u5b58\u50a8\u89c6\u9891\u5e27\u7684 Mat \u5bf9\u8c61\n\n    awnn_init(7 * 1024 * 1024); // \u521d\u59cb\u5316 AWNN \u5e93\n    Awnn_Context_t *context = awnn_create(nbg); // \u521b\u5efa AWNN \u4e0a\u4e0b\u6587\n    if (NULL == context){\n        std::cerr << "fatal error, awnn_create failed." << std::endl; // \u5982\u679c\u521b\u5efa AWNN \u4e0a\u4e0b\u6587\u5931\u8d25\uff0c\u5219\u8f93\u51fa\u81f4\u547d\u9519\u8bef\u4fe1\u606f\u5e76\u8fd4\u56de\n        return -1;\n    }\n    /* copy input */\n    uint32_t input_width = 300; // \u8f93\u5165\u56fe\u50cf\u5bbd\u5ea6\n    uint32_t input_height = 300; // \u8f93\u5165\u56fe\u50cf\u9ad8\u5ea6\n    uint32_t input_depth = 3; // \u8f93\u5165\u56fe\u50cf\u901a\u9053\u6570\n    uint32_t sz = input_width * input_height * input_depth; // \u8f93\u5165\u56fe\u50cf\u6570\u636e\u603b\u5927\u5c0f\n\n    uint8_t* plant_data = NULL; // \u5b9a\u4e49\u8f93\u5165\u56fe\u50cf\u6570\u636e\u6307\u9488\uff0c\u521d\u59cb\u5316\u4e3a NULL\n    \n    while (true) {\n    // \u4ece\u89c6\u9891\u8bbe\u5907\u4e2d\u8bfb\u53d6\u4e00\u5e27\u56fe\u50cf\n    cap >> frame;\n\n    // \u68c0\u67e5\u56fe\u50cf\u7684\u4f4d\u6df1\u5ea6\u662f\u5426\u4e3a8\u4f4d\u548c\u901a\u9053\u6570\u662f\u5426\u4e3a3\n    if (frame.depth() != CV_8U) {\n        std::cerr << "\u4e0d\u662f8\u4f4d\u6bcf\u50cf\u7d20\u548c\u901a\u9053\u3002" << std::endl;\n    } else if (frame.channels() != 3) {\n        std::cerr << "\u4e0d\u662f3\u4e2a\u901a\u9053\u3002" << std::endl;\n    } else {\n        // \u8f6c\u7f6e\u548c\u7ffb\u8f6c\u56fe\u50cf\u4ee5\u8c03\u6574\u5176\u65b9\u5411\n        cv::transpose(frame, frame);\n        cv::flip(frame, frame, 0);\n\n        // \u5c06\u56fe\u50cf\u5927\u5c0f\u8c03\u6574\u4e3a\u6240\u9700\u7684\u8f93\u5165\u5bbd\u5ea6\u548c\u9ad8\u5ea6\n        cv::resize(frame, frame, cv::Size(input_width, input_height));\n\n        // \u5bf9MobileNetV2 SSD\u6a21\u578b\u8fdb\u884c\u9884\u5904\u7406\n        plant_data = mbv2_ssd_preprocess(frame, input_width, input_depth);\n\n        // \u8bbe\u7f6eAWNN\u4e0a\u4e0b\u6587\u7684\u8f93\u5165\u7f13\u51b2\u533a\n        uint8_t *input_buffers[1] = {plant_data};\n        awnn_set_input_buffers(context, input_buffers);\n\n        // \u8fd0\u884cAWNN\u4e0a\u4e0b\u6587\u8fdb\u884c\u6a21\u578b\u63a8\u7406\n        awnn_run(context);\n\n        // \u4eceAWNN\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6\u8f93\u51fa\u7f13\u51b2\u533a\n        float **results = awnn_get_output_buffers(context);\n\n        // \u4f7f\u7528SSD\u6a21\u578b\u8fdb\u884c\u76ee\u6807\u68c0\u6d4b\u5e76\u66f4\u65b0\u56fe\u50cf\n        frame = detect_ssd(frame, results);\n\n        // \u5c06\u56fe\u50cf\u5927\u5c0f\u8c03\u6574\u4e3a\u663e\u793a\u5c3a\u5bf8\n        cv::resize(frame, frame, cv::Size(DISPLAY_X, DISPLAY_Y));\n\n        // \u83b7\u53d6\u5e27\u7f13\u51b2\u533a\u7684\u5bbd\u5ea6\u548c\u4f4d\u6df1\u5ea6\n        int framebuffer_width = fb_info.xres_virtual;\n        int framebuffer_depth = fb_info.bits_per_pixel;\n\n        // \u6839\u636e\u5e27\u7f13\u51b2\u533a\u7684\u4f4d\u6df1\u5ea6\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u517c\u5bb9\u683c\u5f0f\n        cv::Size2f frame_size = frame.size();\n        cv::Mat framebuffer_compat;\n        switch (framebuffer_depth) {\n            case 16:\n                // \u5c06BGR\u8f6c\u6362\u4e3aBGR565\u683c\u5f0f\u4ee5\u9002\u7528\u4e8e16\u4f4d\u5e27\u7f13\u51b2\u533a\n                cv::cvtColor(frame, framebuffer_compat, cv::COLOR_BGR2BGR565);\n\n                // \u5c06\u8f6c\u6362\u540e\u7684\u56fe\u50cf\u5199\u5165\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\n                for (int y = 0; y < frame_size.height; y++) {\n                    ofs.seekp(y * framebuffer_width * 2);\n                    ofs.write(reinterpret_cast<char*>(framebuffer_compat.ptr(y)), frame_size.width * 2);\n                }\n                break;\n            case 32:\n                // \u5c06\u56fe\u50cf\u5206\u89e3\u4e3aBGR\u901a\u9053\u5e76\u6dfb\u52a0\u4e00\u4e2aalpha\u901a\u9053\u4ee5\u9002\u7528\u4e8e32\u4f4d\u5e27\u7f13\u51b2\u533a\n                std::vector<cv::Mat> split_bgr;\n                cv::split(frame, split_bgr);\n                split_bgr.push_back(cv::Mat(frame_size, CV_8UC1, cv::Scalar(255)));\n                cv::merge(split_bgr, framebuffer_compat);\n\n                // \u5c06\u8f6c\u6362\u540e\u7684\u56fe\u50cf\u5199\u5165\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\n                for (int y = 0; y < frame_size.height; y++) {\n                    ofs.seekp(y * framebuffer_width * 4);\n                    ofs.write(reinterpret_cast<char*>(framebuffer_compat.ptr(y)), frame_size.width * 4);\n                }\n                break;\n            default:\n                std::cerr << "\u4e0d\u652f\u6301\u7684\u5e27\u7f13\u51b2\u533a\u4f4d\u6df1\u5ea6\u3002" << std::endl;\n        }\n\n        // \u91ca\u653e\u4e3aplant_data\u5206\u914d\u7684\u5185\u5b58\u7a7a\u95f4\n        free(plant_data);\n    }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4e3b\u8981\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5b9a\u4e49\u4e86\u89c6\u9891\u5e27\u7684\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u548c\u5e27\u7387\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u6307\u5b9a\u4e86\u6a21\u578b\u6587\u4ef6\u7684\u8def\u5f84\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5b89\u88c5\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u83b7\u53d6\u5e27\u7f13\u51b2\u533a\u7684\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u6253\u5f00\u89c6\u9891\u8bbe\u5907\uff0c\u5e76\u8bbe\u7f6e\u89c6\u9891\u5e27\u7684\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u548c\u5e27\u7387\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u6253\u5f00\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\uff0c\u7528\u4e8e\u540e\u7eed\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u521d\u59cb\u5316 AWNN \u5e93\uff0c\u5e76\u5206\u914d\u4e00\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u521b\u5efa AWNN \u4e0a\u4e0b\u6587\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5b9a\u4e49\u8f93\u5165\u56fe\u50cf\u7684\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u548c\u901a\u9053\u6570\uff0c\u5e76\u8ba1\u7b97\u8f93\u5165\u56fe\u50cf\u6570\u636e\u7684\u603b\u5927\u5c0f\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u58f0\u660e\u4e00\u4e2a\u8f93\u5165\u56fe\u50cf\u6570\u636e\u6307\u9488\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u4e3b\u5faa\u73af\u51fd\u6570\uff0c\u7528\u4e8e\u4e0d\u65ad\u4ece\u89c6\u9891\u8bbe\u5907\u4e2d\u83b7\u53d6\u89c6\u9891\u5e27\u5e76\u8fdb\u884c\u5904\u7406\u548c\u5c55\u793a\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u5177\u4f53\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\u4f7f\u7528",(0,t.jsx)(e.code,{children:"cap"}),"\u5bf9\u8c61\u4ece\u89c6\u9891\u8bbe\u5907\u4e2d\u83b7\u53d6\u4e00\u5e27\u56fe\u50cf\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"frame"}),"\u4e2d\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u68c0\u67e5\u56fe\u50cf\u7684\u4f4d\u6df1\u5ea6\u662f\u5426\u4e3a8\u4f4d\uff08CV_8U\uff09\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u68c0\u67e5\u56fe\u50cf\u7684\u901a\u9053\u6570\u662f\u5426\u4e3a3\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u5bf9\u56fe\u50cf\u8fdb\u884c\u8f6c\u7f6e\u548c\u7ffb\u8f6c\u64cd\u4f5c\uff0c\u4ee5\u8c03\u6574\u56fe\u50cf\u7684\u65b9\u5411\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u5c06\u56fe\u50cf\u7684\u5927\u5c0f\u8c03\u6574\u4e3a\u8bbe\u5b9a\u7684\u8f93\u5165\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u8c03\u7528",(0,t.jsx)(e.code,{children:"mbv2_ssd_preprocess"}),"\u51fd\u6570\u5bf9\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728",(0,t.jsx)(e.code,{children:"plant_data"}),"\u4e2d\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:["\u5c06",(0,t.jsx)(e.code,{children:"plant_data"}),"\u8bbe\u7f6e\u4e3aAWNN\u4e0a\u4e0b\u6587\u7684\u8f93\u5165\u7f13\u51b2\u533a\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u8fd0\u884cAWNN\u4e0a\u4e0b\u6587\uff0c\u6267\u884c\u6a21\u578b\u63a8\u7406\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u4f7f\u7528",(0,t.jsx)(e.code,{children:"detect_ssd"}),"\u51fd\u6570\u5bf9\u56fe\u50cf\u8fdb\u884c\u76ee\u6807\u68c0\u6d4b\uff0c\u5f97\u5230\u68c0\u6d4b\u7ed3\u679c\u7684\u53ef\u89c6\u5316\u56fe\u50cf\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5c06\u56fe\u50cf\u7684\u5927\u5c0f\u8c03\u6574\u4e3a\u8bbe\u5b9a\u7684\u663e\u793a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002"}),"\n",(0,t.jsx)(e.li,{children:"\u6839\u636e\u5e27\u7f13\u51b2\u533a\u7684\u4f4d\u6df1\u5ea6\uff0c\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u4e0e\u5e27\u7f13\u51b2\u533a\u517c\u5bb9\u7684\u683c\u5f0f\uff0c\u5e76\u5199\u5165\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\u3002"}),"\n",(0,t.jsxs)(e.li,{children:["\u91ca\u653e",(0,t.jsx)(e.code,{children:"plant_data"}),"\u7684\u5185\u5b58\u7a7a\u95f4\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5faa\u73af\u56de\u5230\u7b2c1\u6b65\uff0c\u7ee7\u7eed\u83b7\u53d6\u548c\u5904\u7406\u4e0b\u4e00\u5e27\u56fe\u50cf\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4e3b\u8981\u5b8c\u6210\u4e86\u4ece\u89c6\u9891\u8bbe\u5907\u83b7\u53d6\u56fe\u50cf\u3001\u9884\u5904\u7406\u56fe\u50cf\u3001\u6267\u884c\u6a21\u578b\u63a8\u7406\u3001\u76ee\u6807\u68c0\u6d4b\u548c\u5c06\u7ed3\u679c\u5199\u5165\u5e27\u7f13\u51b2\u533a\u6587\u4ef6\u7b49\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u4ee5\u5b9e\u73b0\u5b9e\u65f6\u76ee\u6807\u68c0\u6d4b\u5e76\u5728\u663e\u793a\u8bbe\u5907\u4e0a\u5c55\u793a\u68c0\u6d4b\u7ed3\u679c\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u6548\u679c\u5c55\u793a",children:"\u6548\u679c\u5c55\u793a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20240126200516520",src:i(29492).Z+"",width:"588",height:"662"})})]})}function h(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},29492:(n,e,i)=>{i.d(e,{Z:()=>t});const t=i.p+"assets/images/image-20240126200516520-5df5ef3f261bd40f887868c618ba3538.png"},14180:(n,e,i)=>{i.d(e,{Z:()=>t});const t=i.p+"assets/images/image-20240320180529300-b957b0bff777d821e913f37529f6da26.png"},11151:(n,e,i)=>{i.d(e,{Z:()=>l,a:()=>c});var t=i(67294);const s={},r=t.createContext(s);function c(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);